
<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from doc.ez.no/Extensions/eZ-Publish-extensions/eZ-Survey/eZ-Survey-LS-5.x/Installation/(language)/eng-GB by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:19:04 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<style type="text/css">
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/core.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/classes.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/doc.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/print.css) print;</style>

<link type="text/css" rel="stylesheet" href="../../../../../../extension/ezdoc/design/doc/stylesheets/print.css" media="print" />

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie5.css);    </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte.css); </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte-doc.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6.css);    </style>     <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezdoc/design/doc/stylesheets/gecko.css);</style>"); --></script>

<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/mainmenu-hover.js"></script>
<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/ezno-searchbox.js"></script>
                                              
    <title>Installation / eZ Survey LS 5.x / eZ Survey / eZ Publish extensions / Extensions / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

            <meta http-equiv="Content-language" content="en-GB" />

    
                <meta name="author" content="eZ systems" />
                    <meta name="copyright" content="eZ systems" />
                    <meta name="description" content="eZ Publish Documentation" />
                    <meta name="keywords" content="eZ Publish, documentation, manual, reference, eZ systems" />
        
    <meta name="generator" content="eZ Publish" />
    <link rel="Home" href="../../../../../../index.html" title="Doc front page" />
<link rel="Search" href="../../../../../../content/advancedsearch.html" title="Search Doc" />
<link rel="Shortcut icon" href="../../../../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon" />

</head>
<body onload="initDocSearch();menuInit();">

<!-- Complete page area: START -->
<div id="page">


	
<div><a href="https://www.ibexa.co"><img class="logotype" width="100" height="50" src="https://ezpublishdoc.mugo.ca/design/standard/images/ibexa_logo.svg" alt="ibexa"></a></div>


<div id="page-content-position"><div id="page-content-position-inner"><div id="page-content">

<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p><a href="../index.html">ez publish</a> /
                        <a href="../../../../../../index.html">documentation</a>
        
                        /
                            <a href="../../../../../../Extensions.html">extensions</a>
        
                        /
                            <a href="../../../../../eZ-Publish-extensions.html">ez publish extensions</a>
        
                        /
                            <a href="../../../../eZ-Survey.html">ez survey</a>
        
                        /
                            <a href="../../../eZ-Survey-LS-5.html">ez survey ls 5.x</a>
        
                        /
                            installation
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide" />

<!-- Main area: START -->
                                    <div id="ezp5disclaimer">
                <p><strong style="color: red">Caution:</strong> This documentation is for <strong>eZ Publish</strong> <em>legacy</em>, from version 3.x to 5.x.<br/>
                For 5.x documentation covering <em>Platform</em> see <a href="../../../../../../display/MAIN/eZ%2bDocumentation%2bCenter.html">eZ Documentation Center</a>, for difference between <em>legacy</em> and <em>Platform</em> see <a href="../../../../../../pages/viewpage0139.html?pageId=11403666">5.x Architecture overview</a>.</p>
            </div>
            
<div id="page-width5">
<div id="main" class="float-break">


<div class="template-design area-docmenu-normal">
<div class="template-module">
<div class="template-object">
<div id="contentmenu">
                        <div class="attribute-heading"><h2 class="bullet"><a href="../../../../eZ-Survey.html">Table of contents</a></h2></div>
<div class="boxcontent">

<map id="contentstructure">

    
                                                                        
            <ul>
	    
                                                    
	<li 
		    		class="topchapter-selected  "
		
	    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../eZ-Survey-LS-5.html" title="">
	    	    		                    		    <span class="node-name-normal">eZ Survey LS 5.x</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li 
					    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Requirements.html" title="">
	    	    		                    		    <span class="node-name-normal">Requirements</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
					    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Known-issue.html" title="">
	    	    		                    		    <span class="node-name-normal">Known issue</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
					    		    			class="currentnode"
		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Installation</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
					    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Creating-and-editing-surveys.html" title="">
	    	    		                    		    <span class="node-name-normal">Creating and editing surveys</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
					    			class="last"
		    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Management-of-surveys.html" title="">
	    	    		                    		    <span class="node-name-normal">Management of surveys</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li 
		    		class="topchapter"
	    
	    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../eZ-Survey-2.html" title="">
	    	    		                    		    <span class="node-name-normal">eZ Survey 2.x</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                        
            
</map>

</div>            
</div>
</div>
</div>
</div>
<div class="area-docmain-normal">
<div class="template-design">
<div class="template-module content-view-full">
<div class="template-object">

<div class="attribute-heading">
<h1>Installation</h1>
</div>

<p>eZ Survey can be downloaded from your support.ez.no account, under&nbsp;<a href="http://support.ez.no/Downloads" title="Enterprise software downloads" target="_blank">Enterprise software downloads</a>.</p>
<ol>
<li><div>&nbsp;Copy the eZ Survey package into the &quot;ezpublish_legacy/extension&quot; directory in the root of your eZ Publish installation and unpack the files. </div></li><li><div><p>
Enable the extension in eZ Publish by editing &quot;site.ini.append(.php)&quot; in the <i>ezpublish_legacy/settings/override</i> folder of your eZ Publish installation. It is possible that this file does not exist, if so it must be created.<br />&nbsp;In &quot;site.ini.append(.php)&quot; you must add &quot;ActiveExtensions[]=ezsurvey&quot; to the block [ExtensionSettings]. It will then most likely look like this:</p><pre class="wordwrap copytoclipboard"><span class="line">[ExtensionSettings]</span>
<span class="line">ActiveExtensions[]=ezoe</span>
<span class="line">ActiveExtensions[]=ezodf</span>
<span class="line">ActiveExtensions[]=ezwebin</span>
<span class="line">ActiveExtensions[]=ezsurvey</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '[ExtensionSettings]\r\nActiveExtensions[]=ezoe\r\nActiveExtensions[]=ezodf\r\nActiveExtensions[]=ezwebin\r\nActiveExtensions[]=ezsurvey' ); return false;" /></p>
<![endif]--><p>If you are running several sites using only one distribution and only want specific sites to use the extension, make the changes in the override file of that specific siteaccess. For example in <i>ezpublish_legacy/settings/siteaccess/news/site.ini.append(.php)</i>. In this case you must add the line &quot;ActiveAccessExtensions[]=ezsurvey&quot; to the [ExtensionSettings]</p></div></li><li><div><p>
By running the php script from command line an array of classes is build that are used by the autoload system in PHP. You also need eZ Components to run the following script.<br />The following script needs to be executed from the <i>&lt;eZ Publish root&gt;/ezpublish_legacy/</i> folder:</p><pre class="wordwrap"><span class="line">$ php bin/php/ezpgenerateautoloads.php --extension</span>
</pre><p>If you don't have eZ Components you can download it at <a href="http://ezcomponents.org/" target="_self">eZ Components</a></p></div></li><li><div><p>Clear the caches, for the &quot;Survey&quot; option to show up in the top menu:&nbsp;</p><pre class="wordwrap"><span class="line">$ php ezpublish/console cache:clear --env=prod</span>
</pre></div></li><li><div><p>Next you must configure eZ Survey. This can be done with a wizard or manually:</p><p><b>With eZ Survey Wizard</b></p><p>
When you navigate to Survey in the Administration Interface for the first time, you will automatically be redirected to the Wizard. Via the Import Database tables page the necessary tables will be imported which eZ Survey uses to store content. <br />&nbsp;</p>
<div class="object-center">        <img src="../../../../../../var/doc/storage/images/media/images/survey_wizard_01/136250-1-eng-GB/survey_wizard_01_reference.png" alt="" />








</div><p>
The Import Survey Content Classes page will let you install the eZ Survey packages which contain two content classes, &quot;Survey attribute class&quot; and &quot;Survey class&quot;. The &quot;Survey attribute class&quot; will be used when you create a new survey content object and is needed to configure the feature to be able to add a related object between the questions in a survey. This class should contain at least one XML block attribute (which is used to show content on the web) and one Text block attribute (which will be used in notification emails sent to the receiver). This class can be used to place formatted content between each question of the survey. The content may be embedded between each question when you create the survey itself.<br />
&nbsp;The &quot;Survey class&quot; is the survey itself. Preferably, this class contains at least a text and a survey attribute. The text field should be used as the header of the object. You can add as many Survey classes as you wish.<br />
&nbsp;Both classes can also be added manually in the Administration Interface.<br />&nbsp;</p>
<div class="object-center">        <img src="../../../../../../var/doc/storage/images/media/images/survey_wizard_02/136253-1-eng-GB/survey_wizard_02_doc.png" alt="" />








</div><p>If you choose the automatic installation you will be shown the Configuration page, where you will only be able to select the survey attribute content class.</p>
<div class="object-center">        <img src="../../../../../../var/doc/storage/images/media/images/survey_wizard_03/136256-1-eng-GB/survey_wizard_03_doc.png" alt="" />








</div><p>
 <br />
&nbsp;Select the parent class where the content of the new survey attributes should be stored. It's useful to create a new folder for this purpose. Through both the &quot;create new&quot; and the &quot;Browse&quot; button you will automatically be redirected to the Media Library, but you can store your surveys at another location if you prefer.<br />&nbsp;</p>
<div class="object-center">        <img src="../../../../../../var/doc/storage/images/media/images/survey_wizard_04/136259-1-eng-GB/survey_wizard_04_doc.png" alt="" />








</div><p>
 <br />
&nbsp;The eZ Survey wizard is now finished and you are able to create new surveys. The Survey-link at the top of the administration interface will bring you back to the Survey Wizard until your setup is finished. The wizard will automatically detect if the necessary classes are installed and your location in the setup. Once your setup is finished you will be able to view the survey list here or change the related object configuration.<br />&nbsp;</p>
<div class="object-center">        <img src="../../../../../../var/doc/storage/images/media/images/survey_wizard_05/136262-1-eng-GB/survey_wizard_05_doc.png" alt="" />








</div><p>
 <br />&nbsp;Make sure the permissions are set to allow the survey to be read and filled in by anonymous users. This must be done through the &quot;Roles and Policies&quot;-link, which can be accessed both in the left menu under the &quot;Setup&quot;-tab, as in the left &quot;Access control&quot; menu under the &quot;User Accounts&quot;-tab.</p><p><b>Manual Configuration</b></p><p>If you already have a working eZ Publish installation running you can skip the next steps and go directly to step “Create the schema for eZ Survey”.</p>
<ol>
<li><div>
&nbsp;Initialize schema:<br />
&nbsp;The schema must be created with all the tables, sequences and triggers for eZ Publish and then be filled with data. You can start by inserting the schema for the extension and then filling it with the basic data.<br />&nbsp;
<ul>
<li><div><p>
Create the schema for eZ Publish<br />The following script needs to be executed from the&nbsp;<i>&lt;eZ Publish root&gt;/ezpublish_legacy/</i>&nbsp;folder:</p><pre class="wordwrap"><span class="line">$ ./bin/php/ezsqlinsertschema.php --type=&lt;dbtype&gt; --user=&lt;user&gt; \</span>
<span class="line">&nbsp;--password=&lt;password&gt; --host=&lt;hostname&gt; \ share/db_schema.dba &lt;dbname&gt;</span>
</pre></div></li><li><div><p>
Insert data for eZ Publish:<br />The following script needs to be executed from the&nbsp;<i>&lt;eZ Publish root&gt;/ezpublish_legacy/</i>&nbsp;folder:</p><pre class="wordwrap copytoclipboard"><span class="line">$ ./bin/php/ezsqlinsertschema.php --type=&lt;dbtype&gt; --user=&lt;user&gt; \</span>
<span class="line">--password=&lt;password&gt; --host=&lt;hostname&gt; \</span>
<span class="line">--schema-file=share/db_schema.dba \</span>
<span class="line">--insert-types=data \</span>
<span class="line">share/db_data.dba &lt;dbname&gt;</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '$ ./bin/php/ezsqlinsertschema.php --type=&lt;dbtype&gt; --user=&lt;user&gt; \\r\n--password=&lt;password&gt; --host=&lt;hostname&gt; \\r\n--schema-file=share/db_schema.dba \\r\n--insert-types=data \\r\nshare/db_data.dba &lt;dbname&gt;' ); return false;" /></p>
<![endif]--></div></li><li><div><p>&nbsp;Next you must create the schema for eZ Survey. The SQL schema for the eZ Survey extension is located in <i>ezpublish_legacy/extension/ezsurvey/sql/&lt;database-implementation&gt;/schema.sql</i> and can be run with for example:</p><pre class="wordwrap"><span class="line">mysql -u&lt;username&gt; -p &lt;dbname&gt; &lt; ezpublish_legacy/extension/ezsurvey/sql/mysql/schema.sql</span>
</pre></div></li>
</ul>
</div></li><li><div>
&nbsp;Configure eZ Survey<br />&nbsp;
<ul>
<li><div>&nbsp;You need to create two new content classes: one for the actual survey, the &quot;Survey Class&quot;, and another for the survey attributes, the &quot;Survey Attribute Class&quot;. You can add the necessary content classes through manual installation or add them from a package. </div></li>
</ul>

<ul>
<li><div>
&nbsp;The &quot;Related object&quot; for the survey attribute must also be configured. This can be done via the Survey-tab in the Administration Interface, where you can click on the &quot;Related object configuration&quot;-link in the left menu. Choose the &quot;Survey Attribute&quot; content class and define the parent folder for the survey attributes with the &quot;browse&quot;-button. It is best that you create a new content folder to store the survey attribute objects. Press &quot;Update All&quot; when you've made your selection.<br />&nbsp;
<div class="object-center">        <img src="../../../../../../var/doc/storage/images/media/images/survey_wizard_06/136265-1-eng-GB/survey_wizard_06_doc.png" alt="" />








</div> </div></li>
</ul>
</div></li><li><div>Make sure the permissions are set to allow the survey to be read and filled in by anonymous users. This must be done through the &quot;Roles and Policies&quot;-link, which can be accessed both in the left menu under the &quot;Setup&quot;-tab, as in the left menu &quot;Access control&quot; under the &quot;User Accounts&quot;-tab. </div></li><li><div>Now you are able to create a new survey. </div></li>
</ol>
</div></li>
</ol>


<div class="break"></div><div class="pageinfo float-break">
<div class="created">


<p><label>Written by:</label>Ricardo Correia&nbsp;(18/11/2013 10:25 am)</p>
</div>
<div class="modified">
<p><label>Last updated by:</label>Ricardo Correia&nbsp;(21/11/2013 4:05 pm)</p>
</div></div>
<hr class="hide" />

</div>
</div>
</div>

<div id="comments" class="class-comment">
<div class="content-view-children">

<h1>Comments</h1>
<p>There are no comments.</p>
<div class="toolbar">

<form method="post" action="https://doc.ez.no/content/action">
<!-- <input class="button" type="submit" name="NewButton" value="New comment" /> -->
<input type="hidden" name="NodeID" value="29031" />
<input type="hidden" name="RedirectURIAfterPublish" value="Extensions/eZ-Publish-extensions/eZ-Survey/eZ-Survey-LS-5.x/Installation" />
<input type="hidden" name="ClassID" value="17" />
</form>
</div>

</div>
</div>

</div>
<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide" />

</div></div></div>

        

</div>
<!-- Complete page area: END -->











</body>

<!-- Mirrored from doc.ez.no/Extensions/eZ-Publish-extensions/eZ-Survey/eZ-Survey-LS-5.x/Installation/(language)/eng-GB by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:19:04 GMT -->
</html>

<!-- th[eZ] 20050804 -->
