
<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from doc.ez.no/Extensions/eZ-Publish-extensions/eZ-Publish-Extension-for-Oracle-R-database/5.0/Installation/Automated-Initialization by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 07:25:23 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<style type="text/css">
    @import url(../../../../../extension/ezdoc/design/doc/stylesheets/core.css);
    @import url(../../../../../extension/ezdoc/design/doc/stylesheets/classes.css);
    @import url(../../../../../extension/ezdoc/design/doc/stylesheets/doc.css);
    @import url(../../../../../extension/ezdoc/design/doc/stylesheets/print.css) print;</style>

<link type="text/css" rel="stylesheet" href="../../../../../extension/ezdoc/design/doc/stylesheets/print.css" media="print" />

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie5.css);    </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte.css); </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte-doc.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6.css);    </style>     <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezdoc/design/doc/stylesheets/gecko.css);</style>"); --></script>

<script type="text/javascript" src="../../../../../extension/ezdoc/design/doc/javascripts/mainmenu-hover.js"></script>
<script type="text/javascript" src="../../../../../extension/ezdoc/design/doc/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../../../extension/ezdoc/design/doc/javascripts/ezno-searchbox.js"></script>
                                                    
    <title>Automated Initialization / Installation / 5.0 / eZ Publish Extension for OracleÂ® database / eZ Publish extensions / Extensions / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

            <meta http-equiv="Content-language" content="en-GB" />

    
                <meta name="author" content="eZ systems" />
                    <meta name="copyright" content="eZ systems" />
                    <meta name="description" content="eZ Publish Documentation" />
                    <meta name="keywords" content="eZ Publish, documentation, manual, reference, eZ systems" />
        
    <meta name="generator" content="eZ Publish" />
    <link rel="Home" href="../../../../../index.html" title="Doc front page" />
<link rel="Search" href="../../../../../content/advancedsearch.html" title="Search Doc" />
<link rel="Shortcut icon" href="../../../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon" />

</head>
<body onload="initDocSearch();menuInit();">

<!-- Complete page area: START -->
<div id="page">


	
<div><a href="https://www.ibexa.co"><img class="logotype" width="100" height="50" src="https://ezpublishdoc.mugo.ca/design/standard/images/ibexa_logo.svg" alt="ibexa"></a></div>


<div id="page-content-position"><div id="page-content-position-inner"><div id="page-content">

<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p><a href="../../../../../eZ-Publish/index.html">ez publish</a> /
                        <a href="../../../../../index.html">documentation</a>
        
                        /
                            <a href="../../../../../Extensions.html">extensions</a>
        
                        /
                            <a href="../../../../eZ-Publish-extensions.html">ez publish extensions</a>
        
                        /
                            <a href="../../../eZ-Publish-Extension-for-Oracle-R-database.html">ez publish extension for or...</a>
        
                        /
                            <a href="../../5.html">5.0</a>
        
                        /
                            <a href="../Installation.html">installation</a>
        
                        /
                            automated initialization
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide" />

<!-- Main area: START -->
                                    <div id="ezp5disclaimer">
                <p><strong style="color: red">Caution:</strong> This documentation is for <strong>eZ Publish</strong> <em>legacy</em>, from version 3.x to 5.x.<br/>
                </p>

            </div>
            
<div id="page-width5">
<div id="main" class="float-break">


<div class="template-design area-docmenu-normal">
<div class="template-module">
<div class="template-object">
<div id="contentmenu">
                        <div class="attribute-heading"><h2 class="bullet"><a href="../../../eZ-Publish-Extension-for-Oracle-R-database.html">Table of contents</a></h2></div>
<div class="boxcontent">

<map id="contentstructure">

    
                                                                        
            <ul>
	    
                                                    
	<li 
		    		class="topchapter-selected  "
		
	    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../5.html" title="">
	    	    		                    		    <span class="node-name-normal">5.0</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li 
					    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Concepts-and-Basics.html" title="">
	    	    		                    		    <span class="node-name-normal">Concepts and Basics</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
					    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Requirements.html" title="">
	    	    		                    		    <span class="node-name-normal">Requirements</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
					    			class="last"
		    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Installation</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li 
					    		    			class="currentnode"
		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="Automated-Initialization.html" title="">
	    	    		                    		    <span class="node-name-normal">Automated Initialization</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
					    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="Manual-Initialization.html" title="">
	    	    		                    		    <span class="node-name-normal">Manual Initialization</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
					    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="Configuring-eZ-Publish.html" title="">
	    	    		                    		    <span class="node-name-normal">Configuring eZ Publish</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
					    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="Clustering.html" title="">
	    	    		                    		    <span class="node-name-normal">Clustering</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
					    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="Upgrading.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
					    			class="last"
		    		    			    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="Oracle-Specific-Notes.html" title="">
	    	    		                    		    <span class="node-name-normal">Oracle Specific Notes</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li 
		    		class="topchapter"
	    
	    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../2.html" title="">
	    	    		                    		    <span class="node-name-normal">2.0</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
		    		class="topchapter"
	    
	    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../1.html" title="">
	    	    		                    		    <span class="node-name-normal">1.8</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
		    		class="topchapter"
	    
	    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../1-2.html" title="">
	    	    		                    		    <span class="node-name-normal">1.5</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li 
		    		class="topchapter"
	    
	    	    >
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../1-3.html" title="">
	    	    		                    		    <span class="node-name-normal">1.4</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                        
            
</map>

</div>            
</div>
</div>
</div>
</div>
<div class="area-docmain-normal">
<div class="template-design">
<div class="template-module content-view-full">
<div class="template-object">

<div class="attribute-heading">
<h1>Automated Initialization</h1>
</div>

<p>This section describes how you can create a clean eZ Publish database on your Oracle server using the &quot;ora-initialize.sh&quot; script. The script is intended to help those Linux/UNIX users who wish to create a new eZ Publish site running on an Oracle database. (Windows users must do <a href="Manual-Initialization.html" target="_self">manual initialization</a> instead.) It is also possible to re-initialize an Oracle database that contains eZ Publish related information left after previous eZ Publish installations.The &quot;ora-initialize.sh&quot; script is located in the &quot;extension/ezoracle/scripts&quot; directory and can be executed using the <a href="http://en.wikipedia.org/wiki/Bash" target="_blank">Bourne Again Shell (bash)</a>. The following example shows how to run the script.</p>
<ol>
<li><div>&nbsp;Navigate into the eZ Publish installation directory. </div></li><li><div>&nbsp;Run the script using the following command: <pre class="wordwrap"><span class="line">./extension/ezoracle/bin/shell/ora-initialize.sh</span>
</pre>&nbsp;</div></li>
</ol>
<p><i><b>Warning:</b> when using this method, the tables needed by extensions will not be automatically created.</i>The script will perform several steps (described below). Note that when the script needs to perform any actions on an Oracle server, it will create a temporary (hidden) file called &quot;.ezoracle_test.php&quot;. Execute it and then remove it (the temporary file is a script that makes use of the PHP Oracle functions). This is done on every step except the 4-th one. In other words, the script must have write/create privileges in the directory.</p><a name="eztoc133251_1" id="eztoc133251_1"></a><h2>Step 1. Checking requirements</h2><p>The script will check if the following requirements are met:</p>
<ul>
<li><div>&nbsp;PHP CLI is available </div></li><li><div>&nbsp;PHP has support for Oracle compiled in </div></li><li><div>&nbsp;The eZ Publish installation contains the &quot;ezoracle&quot; extension </div></li><li><div>&nbsp;Both the database schema and database data files (&quot;share/db_schema.dba&quot; and &quot;share/db_data.dba&quot;) are present in the eZ Publish directory. </div></li>
</ul>
<p>The script will also check if the environment variable ORACLE_HOME, which points to the Oracle installation directory, is set and the &quot;tnsnames.ora&quot; file is present it the &quot;network/admin&quot; subdirectory. Alternatively, the script will check if the TNS_ADMIN variable is set and points to a directory where the &quot;tnsnames.ora&quot; file resides. Depending on whether these variables are set and the &quot;tnsnames.ora&quot; file is present, the script may display a warning to the user before continuing with the remaining tests.Two other environment variables that will be checked by the script are LD_LIBRARY_PATH and NLS_LANG. If any of these is not set, a warning will be displayed. If the <a href="http://www.oracle.com/technology/tech/globalization/htdocs/nls_lang faq.htm#_Toc107307732" target="_blank">character set component</a> of the NLS_LANG variable is set to something else than UTF-8 (&quot;AL32UTF8&quot;), the script will display a warning and wait for the user's response, since this configuration is not recommended.</p><a name="eztoc133251_2" id="eztoc133251_2"></a><h2>Step 2. Testing connection to an Oracle server (optional)</h2><p>The script will ask you if this step should be performed or not (skipping is not recommended). If yes, you will have to provide the following information:</p><table class="renderedtable" cellpadding="2" cellspacing="0">

<tr>
<th >  <p>Information</p>
  </th><th >  <p>Description</p>
  </th>
</tr>

<tr>
<td valign="top" style="vertical-align: top">  <p>Username</p>
  </td>
<td valign="top" style="vertical-align: top">  <p>Which user to connect with</p>
  </td>

</tr>

<tr>
<td valign="top" style="vertical-align: top">  <p>Password</p>
  </td>
<td valign="top" style="vertical-align: top">  <p>The password for the user.</p>
  </td>

</tr>

<tr>
<td valign="top" style="vertical-align: top">  <p>Instance</p>
  </td>
<td valign="top" style="vertical-align: top">  <p>The name of the Oracle instance. In most cases, it is a simple name specified in your &quot;tnsnames.ora&quot; file. This must match the instance configured on the client. If you are unsure about this you can use the one set in the ORACLE_SID environment variable.</p>
  </td>

</tr>

</table>
<a name="eztoc133251_3" id="eztoc133251_3"></a><h2>Step 3. Creating an Oracle user with sufficient privileges (optional)</h2><p>The script will ask if you wish to create a new Oracle user account. If you already have a user with <a href="../Requirements.html#privileges" target="_self">sufficient privileges</a>, you can skip this step. To create a new user, you will have to provide the following:</p>
<ul>
<li><div>&nbsp;The username and password for the database administrator (or any other Oracle user that has the &quot;CREATE USER&quot; system privilege). </div></li><li><div>&nbsp;The username and password for the user that is being created. </div></li><li><div>&nbsp;The name of the Oracle instance. </div></li><li><div>&nbsp;The name of the default tablespace for the user that is being created (optional). </div></li>
</ul>
<p>The script will display the SQL query for creating a new user, ask for confirmation and finally add the user.</p><a name="eztoc133251_4" id="eztoc133251_4"></a><h2>Step 4. Connecting to an Oracle server</h2><p>If you did not create a new user account during step 3, the script will ask you to provide the username/password (not the DB administrator, but the one which the eZ Publish database belongs to) and the name of the Oracle instance. The user must have the <a href="../Requirements.html#privileges" target="_self">required privileges</a>, so that the script can connect to the specified Oracle database and perform the next steps.Note that this step will be skipped if you created a new user during step 3.</p><a name="eztoc133251_5" id="eztoc133251_5"></a><h2>Step 5. Testing user info with Oracle</h2><p>The script will now attempt to connect to the specified Oracle database using the Oracle account that was specified/created during step 3 or 4.</p><a name="eztoc133251_6" id="eztoc133251_6"></a><h2>Step 6. Creating the &quot;md5_digest&quot; function</h2><p>The database extension requires a custom function called &quot;md5_digest&quot; to be stored in the database. This function returns an MD5 hash (checksum) generated for the provided string input. The script will create this function if the Oracle account that is being used has the &quot;CREATE PROCEDURE&quot; privilege.</p><a name="eztoc133251_7" id="eztoc133251_7"></a><h2>Step 7. Creating the &quot;bitor&quot; function</h2><p>The database extension requires a custom function called &quot;bitor&quot; to be stored in the database. This function returns the result of a bitwise OR operation performed on two numeric arguments. The script will create this function if the Oracle account that is being used has the &quot;CREATE PROCEDURE&quot; privilege.</p><a name="eztoc133251_8" id="eztoc133251_8"></a><h2>Step 8. Cleaning up the database</h2><p>The script will search for existing eZ Publish data in the database and get rid of it (if any).</p><a name="eztoc133251_9" id="eztoc133251_9"></a><h2>Step 9. Initializing the database structure</h2><p>The script will initialize the necessary database structure for eZ Publish (create all the necessary tables, sequences and triggers in the Oracle database) according to the definitions specified in the &quot;share/db_schema.dba&quot; file.</p><a name="eztoc133251_10" id="eztoc133251_10"></a><h2>Step 10. Importing pre-defined data to the database</h2><p>The script will import the pre-defined data from the &quot;share/db_data.dba&quot; file to the database, so that the clean eZ Publish database will be ready to use.To migrate an existing database with its data, you first need to generate the schema file and the data file with the following commands (launched from the eZ Publish installation directory):</p><pre class="wordwrap"><span class="line">./bin/php/ezsqldumpschema.php --output-types=schema --format=generic \ --output-array --type=mysql \ --host= --user= --password= \ &nbsp;path/to/schema.dba</span>
</pre><pre class="wordwrap"><span class="line">./bin/php/ezsqldumpschema.php --output-types=data --format=generic \ --output-array --type=mysql \ --host= --user= --password= \ &nbsp;path/to/data.dba</span>
</pre><p>Then you can run the ora-initialize.sh script with the previously generated files in parameter.</p><pre class="wordwrap"><span class="line">./extension/ezoracle/bin/shell/ora-initialize.sh -s path/to/schema.dba \-d path/to/data.dba</span>
</pre><p>Once the automated initialization has successfully finished, you may continue the installation process by following the <a href="Configuring-eZ-Publish.html#configure_ezp" target="_self">remaining steps</a>.</p>

<div class="break"></div><div class="pageinfo float-break">
<div class="created">


<p><label>Written by:</label>Andrea Melo&nbsp;(12/11/2012 3:46 pm)</p>
</div>
<div class="modified">
<p><label>Last updated by:</label>Andrea Melo&nbsp;(06/12/2012 11:24 am)</p>
</div></div>
<hr class="hide" />

</div>
</div>
</div>

<div id="comments" class="class-comment">
<div class="content-view-children">

<h1>Comments</h1>
<p>There are no comments.</p>
<div class="toolbar">

<form method="post" action="https://doc.ez.no/content/action">
<!-- <input class="button" type="submit" name="NewButton" value="New comment" /> -->
<input type="hidden" name="NodeID" value="28151" />
<input type="hidden" name="RedirectURIAfterPublish" value="Extensions/eZ-Publish-extensions/eZ-Publish-Extension-for-Oracle-R-database/5.0/Installation/Automated-Initialization" />
<input type="hidden" name="ClassID" value="17" />
</form>
</div>

</div>
</div>

</div>
<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide" />

</div></div></div>

        

</div>
<!-- Complete page area: END -->











</body>

<!-- Mirrored from doc.ez.no/Extensions/eZ-Publish-extensions/eZ-Publish-Extension-for-Oracle-R-database/5.0/Installation/Automated-Initialization by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 07:25:23 GMT -->
</html>

<!-- th[eZ] 20050804 -->
