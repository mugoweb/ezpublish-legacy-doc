<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


<style type="text/css">
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/core.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/classes.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/doc.css);
    @import url(../../../../../../extension/ezdoc/design/doc/stylesheets/print.css) print;</style>

<link type="text/css" rel="stylesheet" href="../../../../../../extension/ezdoc/design/doc/stylesheets/print.css" media="print">

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie5.css);    </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte.css); </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte-doc.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6.css);    </style>     <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezdoc/design/doc/stylesheets/gecko.css);</style>"); --></script>

<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/mainmenu-hover.js"></script>
<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../../../../extension/ezdoc/design/doc/javascripts/ezno-searchbox.js"></script>
                                                          
    <title>treemenu / Miscellaneous / Template operators / Reference / 3.6 / Technical manual / eZ Publish / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

            <meta http-equiv="Content-language" content="en-GB">

    
                <meta name="author" content="eZ systems">
                    <meta name="copyright" content="eZ systems">
                    <meta name="description" content="eZ Publish Documentation">
                    <meta name="keywords" content="eZ Publish, documentation, manual, reference, eZ systems">
        
    <meta name="generator" content="eZ Publish">
    <link rel="Home" href="https://doc.ez.no/" title="Doc front page">
<link rel="Search" href="https://doc.ez.no/content/advancedsearch" title="Search Doc">
<link rel="Shortcut icon" href="../../../../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon">

</head>
<body onload="initDocSearch();menuInit();">

<!-- Complete page area: START -->
<div id="page">


<div><a href="https://www.ibexa.co"><img class="logotype" width="100" height="50" src="https://ezpublishdoc.mugo.ca/design/standard/images/ibexa_logo.svg" alt="ibexa"></a></div>
<div id="page-content-position"><div id="page-content-position-inner"><div id="page-content">

<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p><a href="../index.html">ez publish</a>
        
                        /
                            <a href="../../../../../Technical-manual.html">technical manual</a>
        
                        /
                            <a href="../../../../3.6.html">3.6</a>
        
                        /
                            <a href="../../../Reference.html">reference</a>
        
                        /
                            <a href="../../Template-operators.html">template operators</a>
        
                        /
                            <a href="../Miscellaneous.html">miscellaneous</a>
        
                        /
                            treemenu
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide">

<!-- Main area: START -->
                                    <div id="ezp5disclaimer">
                <p><strong style="color: red">Caution:</strong> This documentation is for <strong>eZ Publish</strong> <em>legacy</em>, from version 3.x to 5.x.<br></p>
            </div>
            
<div id="page-width5">
<div id="main" class="float-break">


<div class="template-design area-docmenu-normal">
<div class="template-module">
<div class="template-object">
<div id="contentmenu">
                        <div class="attribute-heading"><h2 class="bullet"><a href="../../../../3.6.html">Table of contents</a></h2></div>
<div class="boxcontent">

<map id="contentstructure">

    
                                                                        
            <ul>
	    
                                                        
                                    
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Installation</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Concepts-and-basics.html" title="">
	    	    		                    		    <span class="node-name-normal">Concepts and basics</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Templates.html" title="">
	    	    		                    		    <span class="node-name-normal">Templates</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Features.html" title="">
	    	    		                    		    <span class="node-name-normal">Features</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter-selected  ">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Reference.html" title="">
	    	    		                    		    <span class="node-name-normal">Reference</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Datatypes.html" title="">
	    	    		                    		    <span class="node-name-normal">Datatypes</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Content-classes.html" title="">
	    	    		                    		    <span class="node-name-normal">Content classes</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Modules.html" title="">
	    	    		                    		    <span class="node-name-normal">Modules</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Views.html" title="">
	    	    		                    		    <span class="node-name-normal">Views</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Objects.html" title="">
	    	    		                    		    <span class="node-name-normal">Objects</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Workflow-events.html" title="">
	    	    		                    		    <span class="node-name-normal">Workflow events</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Template-operators.html" title="">
	    	    		                    		    <span class="node-name-normal">Template operators</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Template-functions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template functions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Template-control-structures.html" title="">
	    	    		                    		    <span class="node-name-normal">Template control structures</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Template-override-conditions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template override conditions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Template-fetch-functions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template fetch functions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Template-PDF-functions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template PDF functions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Configuration-files.html" title="">
	    	    		                    		    <span class="node-name-normal">Configuration files</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Libraries.html" title="">
	    	    		                    		    <span class="node-name-normal">Libraries</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../XML-tags.html" title="">
	    	    		                    		    <span class="node-name-normal">XML tags</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                            </ul>
                        
            
</map>

</div>            
</div>
</div>
</div>
</div>
<div class="area-docmain-normal">
<div class="template-design">
<div class="template-module content-view-full">
<div class="template-object">

<div class="attribute-heading">
<h1>treemenu</h1>
</div>
<h3>Summary</h3>
Fetches a subtree of nodes for the purpose of menu generation.<h3>Usage</h3>
<pre>treemenu( path, 
          node_id
          [, class_filter       ]
          [, depth_skip         ]
          [, max_level          ] 
          [, is_selected_method ] )</pre><h3>Parameters</h3><table class="list" cellspacing="0">
<tr><th>Name</th><th>Type</th><th>Description</th><th>Required</th></tr><tr class="bglight">
        <td>path</td>
        <td>array</td>
        <td>An array of the path ($module_result.path).</td>
        <td>Yes.</td>
    </tr><tr class="bgdark">
        <td>node_id</td>
        <td>integer</td>
        <td>The node ID number (the root of the subtree).</td>
        <td>Yes.</td>
    </tr><tr class="bglight">
        <td>class_filter</td>
        <td>array</td>
        <td>An array of classes that should be filtered.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>depth_skip</td>
        <td>integer</td>
        <td>Number of levels that should be skipped.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>max_level</td>
        <td>integer</td>
        <td>The max depth that should be explored. (2 by default)</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>is_selected_method</td>
        <td>string</td>
        <td>Sets whether "is_selected=TRUE" should be assigned to the parents of the current node as well.</td>
        <td>No.</td>
    </tr></table><h3>Returns</h3>
A complex structure that can be used to build a menu (see below).<h3>Description</h3>
 <p>This operator fetches a subtree of nodes and returns a complex structure (an array of hashes) that can be used to generate a menu.</p> <p>If the optional "class_filter" parameter is omitted, all nodes will be fetched without filtering. If an empty array is passed, then only folder nodes (class ID = 1) will be fetched.</p> <p>The default value of the "is_selected_method" parameter is "tree". This value determines that the current node and its parent nodes will be considered as selected (is_selected=TRUE). If this parameter is set to "node", only the current node will be considered as selected.</p> <p>The following table shows the hash-structure for each element in the array that will be returned.</p> <table class="renderedtable" cellpadding="2" cellspacing="0">
 
<tr>
 <th>   <p>Key</p> 
  </th> <th>   <p>Type</p> 
  </th> <th>   <p>Description</p> 
  </th> 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>id</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>integer</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>The ID of the node.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>level</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>integer</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>The depth of the node.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>url_alias</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>string</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>The URL alias of the node.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>url</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>string</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>The system URL of the node.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>text</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>string</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>The name of the node.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>is_selected</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>boolean</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>TRUE if the node is currently being viewed/selected, FALSE otherwise.</p> 
  </td>
 
</tr>
 
</table>
<h3>Examples</h3>
    <a name="eztoc4173_0_0_1" id="eztoc4173_0_0_1"></a><h4>Example 1 (explanatory)</h4> <p>Let's use a small site with the following content structure (see the screenshot) for the purpose of demonstration </p>
<div class="object-center">        <img src="../../../../../../var/doc/storage/images/ez_publish/technical_manual/3_8/images/reference/template_operators/treemenu_explanatory_example/32670-3-eng-GB/treemenu_explanatory_example_doc.png" alt="The content tree">
 <p>The content tree</p>







</div><p>
and insert the following code into "pagelayout.tpl":<br></p><pre class="wordwrap copytoclipboard"><span class="line">{def $mainMenu=treemenu( $module_result.path, $module_result.node_id ) }</span>
<span class="line">{foreach $mainMenu as $menu}</span>
<span class="line">{$menu.level} - {$menu.text}&lt;br /&gt;</span>
<span class="line">{/foreach}</span>
<span class="line">{undef $mainMenu}</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '{def $mainMenu=treemenu( $module_result.path, $module_result.node_id ) }\r\n{foreach $mainMenu as $menu}\r\n{$menu.level} - {$menu.text}&lt;br /&gt;\r\n{/foreach}\r\n{undef $mainMenu}' ); return false;" /></p>
<![endif]--><p> </p> <p>
If the "Weblog" node is being viewed, then the following output will be produced:<br></p><pre class="wordwrap copytoclipboard"><span class="line">0 - Weblog</span>
<span class="line">1 - July, 29</span>
<span class="line">1 - July, 14</span>
<span class="line">1 - June, 25</span>
<span class="line">0 - Galleries</span>
<span class="line">0 - Products</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '0 - Weblog\r\n1 - July, 29\r\n1 - July, 14\r\n1 - June, 25\r\n0 - Galleries\r\n0 - Products' ); return false;" /></p>
<![endif]--><p> </p> <p>
If the "Blue flower" node is being viewed, then the following output will be produced:<br></p><pre class="wordwrap copytoclipboard"><span class="line">0 - Weblog</span>
<span class="line">0 - Galleries</span>
<span class="line">1 - Misc flowers</span>
<span class="line">1 - Landscape</span>
<span class="line">0 - Products</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '0 - Weblog\r\n0 - Galleries\r\n1 - Misc flowers\r\n1 - Landscape\r\n0 - Products' ); return false;" /></p>
<![endif]--><p> </p> <p>
Since the "max_level" parameter is omitted, only two levels are explored. To set the "max_level" parameter to 3, change the first line of the previous code fragment in the following way:<br></p><pre class="wordwrap"><span class="line">{def $mainMenu=treemenu( $module_result.path, $module_result.node_id, , , 3 ) }</span>
</pre><p> </p> <p>
This will produce the following output for the "Blue flower" node:<br></p><pre class="wordwrap copytoclipboard"><span class="line">0 - Weblog</span>
<span class="line">0 - Galleries</span>
<span class="line">1 - Misc flowers</span>
<span class="line">2 - Red flower</span>
<span class="line">2 - Blue flower</span>
<span class="line">1 - Landscape</span>
<span class="line">0 - Products</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '0 - Weblog\r\n0 - Galleries\r\n1 - Misc flowers\r\n2 - Red flower\r\n2 - Blue flower\r\n1 - Landscape\r\n0 - Products' ); return false;" /></p>
<![endif]--><p> </p> <p>
To skip the first level, set the "depth_skip" parameter to 1 by changing the first line of the code fragment as shown below:<br></p><pre class="wordwrap"><span class="line">{def $mainMenu=treemenu( $module_result.path, $module_result.node_id, , 1, 3 ) }</span>
</pre><p> </p> <p>
If the "Blue flower" node is being viewed, then the following output will be produced:<br></p><pre class="wordwrap copytoclipboard"><span class="line">0 - Misc flowers</span>
<span class="line">1 - Red flower</span>
<span class="line">1 - Blue flower</span>
<span class="line">0 - Landscape</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '0 - Misc flowers\r\n1 - Red flower\r\n1 - Blue flower\r\n0 - Landscape' ); return false;" /></p>
<![endif]--><p> </p> <p>
Now, let's use another code fragment in order to see which items are selected:<br></p><pre class="wordwrap copytoclipboard"><span class="line">{def $mainMenu=treemenu( $module_result.path, $module_result.node_id, , , 3 )}</span>
<span class="line">{foreach $mainMenu as $menu}</span>
<span class="line">    {if $menu.is_selected}</span>
<span class="line">        {$menu.level} - {$menu.text} (selected) &lt;br /&gt;</span>
<span class="line">    {else}</span>
<span class="line">        {$menu.level} - {$menu.text} &lt;br /&gt;</span>
<span class="line">    {/if}</span>
<span class="line">{/foreach}</span>
<span class="line">{undef $mainMenu}</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '{def $mainMenu=treemenu( $module_result.path, $module_result.node_id, , , 3 )}\r\n{foreach $mainMenu as $menu}\r\n    {if $menu.is_selected}\r\n        {$menu.level} - {$menu.text} (selected) &lt;br /&gt;\r\n    {else}\r\n        {$menu.level} - {$menu.text} &lt;br /&gt;\r\n    {/if}\r\n{/foreach}\r\n{undef $mainMenu}' ); return false;" /></p>
<![endif]--><p> </p> <p>
Since the "is_selected_method" parameter is omitted, the "tree" mode will be used and the following output will be produced for the "Blue flower" node:<br></p><pre class="wordwrap copytoclipboard"><span class="line">0 - Weblog</span>
<span class="line">0 - Galleries (selected)</span>
<span class="line">1 - Misc flowers (selected)</span>
<span class="line">2 - Red flower</span>
<span class="line">2 - Blue flower (selected)</span>
<span class="line">1 - Landscape</span>
<span class="line">0 - Products</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '0 - Weblog \r\n0 - Galleries (selected) \r\n1 - Misc flowers (selected) \r\n2 - Red flower \r\n2 - Blue flower (selected) \r\n1 - Landscape \r\n0 - Products ' ); return false;" /></p>
<![endif]--><p> </p> <p>
To set the "is_selected_method" parameter to "node", replace the first line of the last code fragment by the following line:<br></p><pre class="wordwrap"><span class="line">{def $mainMenu=treemenu( $module_result.path, $module_result.node_id, , , 3, 'node' )}</span>
</pre><p> </p> <p>
If the "Blue flower" node is being viewed, then the following output will be produced:<br></p><pre class="wordwrap copytoclipboard"><span class="line">0 - Weblog</span>
<span class="line">0 - Galleries</span>
<span class="line">1 - Misc flowers</span>
<span class="line">2 - Red flower</span>
<span class="line">2 - Blue flower (selected)</span>
<span class="line">1 - Landscape</span>
<span class="line">0 - Products</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '0 - Weblog \r\n0 - Galleries \r\n1 - Misc flowers \r\n2 - Red flower \r\n2 - Blue flower (selected) \r\n1 - Landscape \r\n0 - Products ' ); return false;" /></p>
<![endif]--><p> </p>       <a name="eztoc4173_0_0_2" id="eztoc4173_0_0_2"></a><h4>Example 2</h4> <p>These examples are from pagelayout.tpl.</p> <p>Make a menu of folder and info_page classes. Skip the first level and maximum go to depth 6.</p> <pre class="wordwrap copytoclipboard"><span class="line">&lt;ul&gt;</span>
<span class="line">{def $mainMenu=treemenu( $module_result.path,</span>
<span class="line">                                    $module_result.node_id,</span>
<span class="line">                                    array('folder','info_page'), 1, 6 )}</span>
<span class="line"> </span>
<span class="line">{foreach $mainMenu as $menu}</span>
<span class="line">    &lt;li class="level_{$menu.level}"&gt;</span>
<span class="line"> </span>
<span class="line">    {if $menu.is_selected}</span>
<span class="line">        &lt;div class="selected"&gt;</span>
<span class="line">        &lt;a href={$menu.url_alias|ezurl}&gt;{$menu.text}&lt;/a&gt;</span>
<span class="line">        &lt;/div&gt;</span>
<span class="line">    {else}</span>
<span class="line">        &lt;a href={$menu.url_alias|ezurl}&gt;{$menu.text}&lt;/a&gt;</span>
<span class="line">    {/if}</span>
<span class="line"> </span>
<span class="line">    &lt;/li&gt;</span>
<span class="line">{/foreach}</span>
<span class="line">&lt;/ul&gt;</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '&lt;ul&gt;\r\n{def $mainMenu=treemenu( $module_result.path, \r\n                                    $module_result.node_id,\r\n                                    array(\'folder\',\'info_page\'), 1, 6 )}\r\n\r\n{foreach $mainMenu as $menu}\r\n    &lt;li class=&quot;level_{$menu.level}&quot;&gt;\r\n\r\n    {if $menu.is_selected}\r\n        &lt;div class=&quot;selected&quot;&gt; \r\n        &lt;a href={$menu.url_alias|ezurl}&gt;{$menu.text}&lt;/a&gt;\r\n        &lt;/div&gt;  \r\n    {else}\r\n        &lt;a href={$menu.url_alias|ezurl}&gt;{$menu.text}&lt;/a&gt;\r\n    {/if}\r\n\r\n    &lt;/li&gt;\r\n{/foreach}\r\n&lt;/ul&gt;' ); return false;" /></p>
<![endif]--> <p>Make a menu which shows the sub menu items when clicked on the parent menu item. Notice that only the objectclass ids: 1, 9, and 17 are visible.</p> <pre class="wordwrap copytoclipboard"><span class="line">{def $docs=treemenu( $module_result.path, $module_result.node_id,</span>
<span class="line">                                     array(1, 9, 17), 0, 4)}</span>
<span class="line">{def $depth=1 $last=0}</span>
<span class="line"> </span>
<span class="line">{foreach $docs as $menu}</span>
<span class="line">    {if and($last | ne(0), $last.level|gt($menu.level))}</span>
<span class="line">        &lt;/ul&gt;</span>
<span class="line">        &lt;/li&gt;</span>
<span class="line">    {/if}</span>
<span class="line"> </span>
<span class="line">    &lt;li&gt;</span>
<span class="line"> </span>
<span class="line">    {if and($last | ne(0), $last.level| lt($menu.level))}</span>
<span class="line">        &lt;ul&gt;</span>
<span class="line">        &lt;li&gt;</span>
<span class="line">    {/if}</span>
<span class="line"> </span>
<span class="line">    &lt;a {$menu.is_selected|choose('','class="selected"')}</span>
<span class="line">        href={$menu.url_alias|ezurl}&gt;{$menu.text|shorten(25)}&lt;/a&gt;</span>
<span class="line">    &lt;/li&gt;</span>
<span class="line"> </span>
<span class="line">    {set last=$menu}</span>
<span class="line">{/foreach}</span>
<span class="line"> </span>
<span class="line">{while $depth |gt(1)}</span>
<span class="line">    &lt;/li&gt;</span>
<span class="line">    &lt;/ul&gt;</span>
<span class="line">    {set depth=$depth|sub(1)}</span>
<span class="line">{/while}</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '{def $docs=treemenu( $module_result.path, $module_result.node_id,\r\n                                     array(1, 9, 17), 0, 4)}\r\n{def $depth=1 $last=0}\r\n\r\n{foreach $docs as $menu}\r\n    {if and($last | ne(0), $last.level|gt($menu.level))}\r\n        &lt;/ul&gt;\r\n        &lt;/li&gt;\r\n    {/if}\r\n\r\n    &lt;li&gt;\r\n\r\n    {if and($last | ne(0), $last.level| lt($menu.level))}\r\n        &lt;ul&gt;\r\n        &lt;li&gt;\r\n    {/if}\r\n\r\n    &lt;a {$menu.is_selected|choose(\'\',\'class=&quot;selected&quot;\')}\r\n        href={$menu.url_alias|ezurl}&gt;{$menu.text|shorten(25)}&lt;/a&gt;\r\n    &lt;/li&gt;\r\n\r\n    {set last=$menu}\r\n{/foreach}\r\n\r\n{while $depth |gt(1)} \r\n    &lt;/li&gt;\r\n    &lt;/ul&gt;\r\n    {set depth=$depth|sub(1)}\r\n{/while}' ); return false;" /></p>
<![endif]-->   

<div class="break"></div><div class="pageinfo float-break">
<div class="created">


<p><label>Written by:</label>Balazs Halasy (05/02/2004 10:51 am)</p>
</div>
<div class="modified">
<p><label>Last updated by:</label>Svitlana Shatokhina (16/10/2006 1:55 pm)</p>
</div><div class="authors">
<p><label>Maintainers:</label>Raymond Bosman, Balazs Halasy, Svitlana Shatokhina</p>
</div></div>
<hr class="hide">

</div>
</div>
</div>

<div id="comments" class="class-comment">
<div class="content-view-children">

<h1>Comments</h1>
<div id="comments-content">
<ul>    <li class="comment-bglight"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment2615" class="attribute-heading">
<h2>is_selected_method</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Tuesday 14 February 2006 7:11:25 am</p>
    <p class="author">Kristof Coomans</p>
</div>

<div class="attribute-short">
Note that the is_selected_method parameter was added in eZ publish 3.5.9, 3.6.6, 3.7.4 and 3.8.0alpha1 (see <a href="http://ez.no/community/bugs/treemenu_wrong_values_of_is_selected)" title="http://ez.no/community/bugs/treemenu_wrong_values_of_is_selected)">http://ez.no/community/bugs/treemenu_wrong_values_of_is_selected)</a>.
</div>




     


</div>


</div>
</div>    </div></li>    <li class="comment-bgdark"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment6538" class="attribute-heading">
<h2>node_id is no longer used</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Monday 16 October 2006 2:43:43 pm</p>
    <p class="author">Svitlana Shatokhina</p>
</div>

<div class="attribute-short">
The "node_id" parameter is no longer used starting from 3.6.11 (rev. 16638), 3.7.9 (rev. 16637), 3.8.4 (rev. 16636), 3.9.0alpha1 (rev. 16635). This parameter has become optional in 3.6.12 (rev.17122), 3.7.10 (rev.17121), 3.8.5 (rev.17120) and deprecated in 3.9.0alpha1 (rev.17119).<br>
<br>
The value specified in the "node_id" parameter is currently ignored by the system. The root of the subtree is now determined by the "path" parameter. If the provided path array points to a node, then a subtree of this node will be fetched. (Use "$module_result.path" to pass the path which leads to the page that is currently being viewed.) If the "path" parameter does not point to a node in the content tree, then a subtree of the "Content" top level node (node ID=2) will be fetched.
</div>




     


</div>


</div>
</div>    </div></li></ul>
</div>
<div class="toolbar">


</div>

</div>
</div>

</div>
<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide">

</div></div></div>



</div>
<!-- Complete page area: END -->











</body>
</html><!-- th[eZ] 20050804 -->
