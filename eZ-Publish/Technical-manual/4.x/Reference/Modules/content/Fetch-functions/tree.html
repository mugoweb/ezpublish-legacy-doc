<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


<style type="text/css">
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/core.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/classes.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/doc.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/print.css) print;</style>

<link type="text/css" rel="stylesheet" href="../../../../../../../extension/ezdoc/design/doc/stylesheets/print.css" media="print">

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie5.css);    </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte.css); </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte-doc.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6.css);    </style>     <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezdoc/design/doc/stylesheets/gecko.css);</style>"); --></script>

<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/mainmenu-hover.js"></script>
<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/ezno-searchbox.js"></script>
                                                                
    <title>tree / Fetch functions / content / Modules / Reference / 4.x / Technical manual / eZ Publish / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

            <meta http-equiv="Content-language" content="en-GB">

    
                <meta name="author" content="eZ systems">
                    <meta name="copyright" content="eZ systems">
                    <meta name="description" content="eZ Publish Documentation">
                    <meta name="keywords" content="eZ Publish, documentation, manual, reference, eZ systems">
        
    <meta name="generator" content="eZ Publish">
    <link rel="Home" href="https://doc.ez.no/" title="Doc front page">
<link rel="Search" href="https://doc.ez.no/content/advancedsearch" title="Search Doc">
<link rel="Shortcut icon" href="../../../../../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon">

</head>
<body onload="initDocSearch();menuInit();">

<!-- Complete page area: START -->
<div id="page">


<div><a href="https://www.ibexa.co"><img class="logotype" width="100" height="50" src="https://ezpublishdoc.mugo.ca/design/standard/images/ibexa_logo.svg" alt="ibexa"></a></div>
<div id="page-content-position"><div id="page-content-position-inner"><div id="page-content">

<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p><a href="../index.html">ez publish</a>
        
                        /
                            <a href="../../../../../../Technical-manual.html">technical manual</a>
        
                        /
                            <a href="../../../../../4.x.html">4.x</a>
        
                        /
                            <a href="../../../../Reference.html">reference</a>
        
                        /
                            <a href="../../../Modules.html">modules</a>
        
                        /
                            <a href="../../content.html">content</a>
        
                        /
                            <a href="../Fetch-functions.html">fetch functions</a>
        
                        /
                            tree
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide">

<!-- Main area: START -->
                                    <div id="ezp5disclaimer">
                <p><strong style="color: red">Caution:</strong> This documentation is for <strong>eZ Publish</strong> <em>legacy</em>, from version 3.x to 5.x.<br></p>
            </div>
            
<div id="page-width5">
<div id="main" class="float-break">


<div class="template-design area-docmenu-normal">
<div class="template-module">
<div class="template-object">
<div id="contentmenu">
                        <div class="attribute-heading"><h2 class="bullet"><a href="../../../../../4.x.html">Table of contents</a></h2></div>
<div class="boxcontent">

<map id="contentstructure">

    
                                                                        
            <ul>
	    
                                                        
                                    
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../../Installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Installation</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../../Concepts-and-basics.html" title="">
	    	    		                    		    <span class="node-name-normal">Concepts and basics</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../../Templates.html" title="">
	    	    		                    		    <span class="node-name-normal">Templates</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../../Features.html" title="">
	    	    		                    		    <span class="node-name-normal">Features</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter-selected  ">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../../Reference.html" title="">
	    	    		                    		    <span class="node-name-normal">Reference</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Database-schema.html" title="">
	    	    		                    		    <span class="node-name-normal">Database schema</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Database-schema/Deprecated-database-fields.html" title="">
	    	    		                    		    <span class="node-name-normal">Deprecated database fields</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Datatypes.html" title="">
	    	    		                    		    <span class="node-name-normal">Datatypes</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Content-classes.html" title="">
	    	    		                    		    <span class="node-name-normal">Content classes</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Modules.html" title="">
	    	    		                    		    <span class="node-name-normal">Modules</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Views.html" title="">
	    	    		                    		    <span class="node-name-normal">Views</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Objects.html" title="">
	    	    		                    		    <span class="node-name-normal">Objects</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Workflow-events.html" title="">
	    	    		                    		    <span class="node-name-normal">Workflow events</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-operators.html" title="">
	    	    		                    		    <span class="node-name-normal">Template operators</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-functions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template functions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-control-structures.html" title="">
	    	    		                    		    <span class="node-name-normal">Template control structures</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-override-conditions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template override conditions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-fetch-functions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template fetch functions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-PDF-functions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template PDF functions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Configuration-files.html" title="">
	    	    		                    		    <span class="node-name-normal">Configuration files</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Libraries.html" title="">
	    	    		                    		    <span class="node-name-normal">Libraries</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../XML-tags.html" title="">
	    	    		                    		    <span class="node-name-normal">XML tags</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Scripts.html" title="">
	    	    		                    		    <span class="node-name-normal">Scripts</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                            </ul>
                        
            
</map>

</div>            
</div>
</div>
</div>
</div>
<div class="area-docmain-normal">
<div class="template-design">
<div class="template-module content-view-full">
<div class="template-object">

<div class="attribute-heading">
<h1>tree</h1>
</div>
<h3>Summary</h3>
Fetches the children of a node recursively.<h3>Usage</h3>
<pre class="wordwrap">
<span class="line">fetch( 'content', 'tree',</span>
<span class="line">       hash( 'parent_node_id',     parent_node_id,</span>
<span class="line">           [ 'sort_by',                    sort_by,                   ]</span>
<span class="line">           [ 'offset',                     offset,                    ]</span>
<span class="line">           [ 'limit',                      limit,                     ]</span>
<span class="line">           [ 'attribute_filter',           attribute_filter,          ]</span>
<span class="line">           [ 'extended_attribute_filter',  extended_attribute_filter, ]</span>
<span class="line">           [ 'class_filter_type',          class_filter_type,         ]</span>
<span class="line">           [ 'class_filter_array',         class_filter_array,        ]</span>
<span class="line">           [ 'only_translated',            only_translated,           ]</span>
<span class="line">           [ 'language',                   language,                  ]</span>
<span class="line">           [ 'main_node_only',             main_node_only,            ]</span>
<span class="line">           [ 'as_object',                  as_object,                 ]</span>
<span class="line">           [ 'depth',                      depth,                     ]</span>
<span class="line">           [ 'depth_operator',             depth_operator             ]</span>
<span class="line">           [ 'limitation',                 limitation                 ]</span>
<span class="line">           [ 'ignore_visibility',          ignore_visibility          ] ) )</span>

</pre><h3>Parameters</h3><table class="list" cellspacing="0">
<tr><th>Name</th><th>Type</th><th>Description</th><th>Required</th></tr><tr class="bglight">
        <td>parent_node_id</td>
        <td>integer</td>
        <td>The ID number of the parent node.</td>
        <td>Yes.</td>
    </tr><tr class="bgdark">
        <td>sort_by</td>
        <td>array</td>
        <td>The sorting mechanism that should be used.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>offset</td>
        <td>integer</td>
        <td>The offset to start at.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>limit</td>
        <td>integer</td>
        <td>The maximum number of nodes that should be fetched.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>attribute_filter</td>
        <td>mixed</td>
        <td>Filter logic for attribute level filtering.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>extended_attribute_filter</td>
        <td>mixed</td>
        <td>The extended attribute level filter logic.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>class_filter_type</td>
        <td>string</td>
        <td>The type of class filtering (include/exclude).</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>class_filter_array</td>
        <td>array</td>
        <td>The type of nodes that should be filtered.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>only_translated</td>
        <td>boolean</td>
        <td>Translation filtering (on/off).</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>language</td>
        <td>string</td>
        <td>The language that should be filtered.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>main_node_only</td>
        <td>boolean</td>
        <td>Type of nodes that should be fetched (all or main nodes only).</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>as_object</td>
        <td>boolean</td>
        <td>If TRUE (or omitted), an array of "ezcontentobjecttreenode" objects will be fetched. Otherwise, an array of arrays will be returned.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>depth</td>
        <td>integer</td>
        <td>The maximum level of depth that should be explored.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>depth_operator</td>
        <td>string</td>
        <td>The logic to use when checking the depth.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>limitation</td>
        <td>array</td>
        <td>Limitation array (emtpy array = access override).</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>ignore_visibility</td>
        <td>boolean</td>
        <td>Makes it possible to fetch hidden nodes.</td>
        <td>No.</td>
    </tr></table><h3>Description</h3>
<p>The "tree" function is very similar to the "list" fetch function. The only difference is that the tree function fetches child nodes recursively. The recursion depth can be controlled by the "depth" and "depth_operator" parameters. The rest of the parameters behave exactly in the same way as they do for the "list" function. Please refer to the documentation page of the "<a href="list.html" target="_self">list</a>" function for a complete explanation of the parameters.</p><a name="eztoc87785_0_0_1" id="eztoc87785_0_0_1"></a><h4>Depth</h4><p>The depth parameter can be used to specify the level of depth (within the branch) that the function should explore when it is running. If the depth is set to one, this function will simply act as the list function. If the depth is greater than one, the function will fetch nodes further down in the branch. The default value is unlimited.</p><a name="eztoc87785_0_0_2" id="eztoc87785_0_0_2"></a><h4>Depth operator</h4><p>The depth operator can be set to either "lt", "eq" or "gt" - meaning "less than", "equal to" and "greather than". For example, if it is set to 'eq', only nodes with the depth that was specified using the depth parameter will be fetched.</p><h3>Examples</h3>
<a name="eztoc87786_0_0_1" id="eztoc87786_0_0_1"></a><h4>Example 1</h4><pre class="wordwrap copytoclipboard"><span class="line">{def $nodes=fetch( 'content', 'tree',</span>
<span class="line">                   hash( 'parent_node_id', 42 ) )}</span>
<span class="line"> </span>
<span class="line">{foreach $nodes as $node}</span>
<span class="line">    {$node.name|wash} &lt;br /&gt;</span>
<span class="line">{/foreach}</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '{def $nodes=fetch( \'content\', \'tree\', \r\n                   hash( \'parent_node_id\', 42 ) )}\r\n\r\n{foreach $nodes as $node}\r\n    {$node.name|wash} &lt;br /&gt;\r\n{/foreach}' ); return false;" /></p>
<![endif]--><p>This example demonstrates how to fetch all the nodes that are under node number 42 recursively (all children, grand-children, etc. will be fetched). The names of the nodes are displayed.</p>


<div class="break"></div><div class="pageinfo float-break">
<div class="created">


<p><label>Written by:</label>Balazs Halasy (06/02/2004 12:15 pm)</p>
</div>
<div class="modified">
<p><label>Last updated by:</label>André R. (18/03/2011 3:19 pm)</p>
</div><div class="authors">
<p><label>Maintainers:</label>Balazs Halasy, Svitlana Shatokhina, Geir Arne Waaler, André R.</p>
</div></div>
<hr class="hide">

</div>
</div>
</div>

<div id="comments" class="class-comment">
<div class="content-view-children">

<h1>Comments</h1>
<div id="comments-content">
<ul>    <li class="comment-bglight"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment18040" class="attribute-heading">
<h2>tree is not a tree but a list</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Monday 19 November 2007 2:53:23 pm</p>
    <p class="author">Adrien</p>
</div>

<div class="attribute-short">
Be aware that 'tree' doesn't return a tree, matrix of array of arrays but a list.<br>
Making a sort on a 'tree' totaly destroys the tree structure and sort all the listed objects without taking in count there depth or parent node.If you wan't to search by depth and parent, it seems that you can't. No recursive function to step easily through this not-tree-but-list.
</div>




     


</div>

<ul>    <li class="comment-bglight"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment20666" class="attribute-heading">
<h2>Re: tree is not a tree but a list</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Friday 24 July 2009 12:03:24 pm</p>
    <p class="author">Simon</p>
</div>

<div class="attribute-short">
Each object is a tree.<br>
I used depth=1 and parse childs.<br>
Example :<br>
<pre class="wordwrap"><span class="line">{def $tree_node = fetch('content', 'tree', hash( 'parent_node_id', $pagedata.root_node, 'depth', 1 ) ) }</span>
<span class="line">&lt;ul&gt;</span>
<span class="line">{foreach $tree_node as $key =&gt; $item}</span>
<span class="line">		&lt;li{cond($key|eq(0), ' class="firstli"')}&gt;&lt;a href={$item.url_alias|ezurl(no)}&gt;{$item.name}&lt;/a&gt;</span>
<span class="line">			&lt;ul&gt;</span>
<span class="line">	{foreach $item.children as $subkey =&gt; $subitem}</span>
<span class="line">			&lt;li{cond($subkey|eq(0), ' class="firstli"')}&gt;&lt;a href={$subitem.url_alias|ezurl(no)}&gt;{$subitem.name}&lt;/a&gt;&lt;/li&gt;</span>
<span class="line">	{/foreach}</span>
<span class="line">			&lt;/ul&gt;</span>
<span class="line">		&lt;/li&gt;</span>
<span class="line">{/foreach}</span>
<span class="line">&lt;/ul&gt;</span>
</pre>
</div>




     


</div>


</div>
</div>    </div></li></ul>
</div>
</div>    </div></li></ul>
</div>
<div class="toolbar">


</div>

</div>
</div>

</div>
<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide">

</div></div></div>



</div>
<!-- Complete page area: END -->











</body>
</html><!-- th[eZ] 20050804 -->
