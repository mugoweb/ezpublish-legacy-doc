<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


<style type="text/css">
    @import url(../../../../../extension/ezdoc/design/doc/stylesheets/core.css);
    @import url(../../../../../extension/ezdoc/design/doc/stylesheets/classes.css);
    @import url(../../../../../extension/ezdoc/design/doc/stylesheets/doc.css);
    @import url(../../../../../extension/ezdoc/design/doc/stylesheets/print.css) print;</style>

<link type="text/css" rel="stylesheet" href="../../../../../extension/ezdoc/design/doc/stylesheets/print.css" media="print">

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie5.css);    </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte.css); </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte-doc.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6.css);    </style>     <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezdoc/design/doc/stylesheets/gecko.css);</style>"); --></script>

<script type="text/javascript" src="../../../../../extension/ezdoc/design/doc/javascripts/mainmenu-hover.js"></script>
<script type="text/javascript" src="../../../../../extension/ezdoc/design/doc/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../../../extension/ezdoc/design/doc/javascripts/ezno-searchbox.js"></script>
                                                    
    <title>from 3.5.2 to 3.7.0 / Upgrading / Installation / 3.7 / Technical manual / eZ Publish / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

            <meta http-equiv="Content-language" content="en-GB">

    
                <meta name="author" content="eZ systems">
                    <meta name="copyright" content="eZ systems">
                    <meta name="description" content="eZ Publish Documentation">
                    <meta name="keywords" content="eZ Publish, documentation, manual, reference, eZ systems">
        
    <meta name="generator" content="eZ Publish">
    <link rel="Home" href="https://doc.ez.no/" title="Doc front page">
<link rel="Search" href="https://doc.ez.no/content/advancedsearch" title="Search Doc">
<link rel="Shortcut icon" href="../../../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon">

</head>
<body onload="initDocSearch();menuInit();">

<!-- Complete page area: START -->
<div id="page">


<div><a href="https://www.ibexa.co"><img class="logotype" width="100" height="50" src="https://ezpublishdoc.mugo.ca/design/standard/images/ibexa_logo.svg" alt="ibexa"></a></div>
<div id="page-content-position"><div id="page-content-position-inner"><div id="page-content">

<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p><a href="../index.html">ez publish</a>
        
                        /
                            <a href="../../../../Technical-manual.html">technical manual</a>
        
                        /
                            <a href="../../../3.7.html">3.7</a>
        
                        /
                            <a href="../../Installation.html">installation</a>
        
                        /
                            <a href="../Upgrading.html">upgrading</a>
        
                        /
                            from 3.5.2 to 3.7.0
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide">

<!-- Main area: START -->
                                    <div id="ezp5disclaimer">
                <p><strong style="color: red">Caution:</strong> This documentation is for <strong>eZ Publish</strong> <em>legacy</em>, from version 3.x to 5.x.<br></p>
            </div>
            
<div id="page-width5">
<div id="main" class="float-break">


<div class="template-design area-docmenu-normal">
<div class="template-module">
<div class="template-object">
<div id="contentmenu">
                        <div class="attribute-heading"><h2 class="bullet"><a href="../../../3.7.html">Table of contents</a></h2></div>
<div class="boxcontent">

<map id="contentstructure">

    
                                                                        
            <ul>
	    
                                                        
                                    
            
                                
                                                    
	<li class="topchapter-selected  ">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Installation</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Normal-installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Normal installation</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Normal-installation/Requirements-for-doing-a-normal-installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Requirements for doing a normal installation</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Normal-installation/Installing-eZ-publish-on-a-Linux-UNIX-based-system.html" title="">
	    	    		                    		    <span class="node-name-normal">Installing eZ publish on a Linux/UNIX based system</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Normal-installation/Installing-eZ-publish-on-Windows.html" title="">
	    	    		                    		    <span class="node-name-normal">Installing eZ publish on Windows</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Bundled-installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Bundled installation</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Bundled-installation/Requirements-for-doing-a-bundled-installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Requirements for doing a bundled installation</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Bundled-installation/Installing-an-eZ-publish-bundle-on-a-Linux-based-system.html" title="">
	    	    		                    		    <span class="node-name-normal">Installing an eZ publish bundle on a Linux based system</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Bundled-installation/Installing-an-eZ-publish-bundle-on-Windows.html" title="">
	    	    		                    		    <span class="node-name-normal">Installing an eZ publish bundle on Windows</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Manual-installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Manual installation</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Manual-installation/Requirements-for-doing-a-manual-installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Requirements for doing a manual installation</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Manual-installation/Manual-installation-on-a-Linux-UNIX-based-system.html" title="">
	    	    		                    		    <span class="node-name-normal">Manual installation on a Linux/UNIX based system</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Manual-installation/Manual-installation-on-Windows.html" title="">
	    	    		                    		    <span class="node-name-normal">Manual installation on Windows</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Manual-installation/Manual-configuration-of-eZ-publish.html" title="">
	    	    		                    		    <span class="node-name-normal">Manual configuration of eZ publish</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Automated-installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Automated installation</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Automated-installation/Requirements-for-doing-an-automated-installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Requirements for doing an automated installation</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Automated-installation/Automated-installation-of-eZ-publish.html" title="">
	    	    		                    		    <span class="node-name-normal">Automated installation of eZ publish</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../The-setup-wizard.html" title="">
	    	    		                    		    <span class="node-name-normal">The setup wizard</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Virtual-host-setup.html" title="">
	    	    		                    		    <span class="node-name-normal">Virtual host setup</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Virtual-host-setup/Virtual-host-example.html" title="">
	    	    		                    		    <span class="node-name-normal">Virtual host example</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li class="currentnode">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="from-3.5.2-to-3.7.0.html" title="">
	    	    		                    		    <span class="node-name-normal">from 3.5.2 to 3.7.0</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="from-3.7.x-to-3.7.y.html" title="">
	    	    		                    		    <span class="node-name-normal">from 3.7.x  to 3.7.y</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Removing-eZ-Publish.html" title="">
	    	    		                    		    <span class="node-name-normal">Removing eZ Publish</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Removing-eZ-Publish/Removing-an-eZ-Publish-bundle.html" title="">
	    	    		                    		    <span class="node-name-normal">Removing an eZ Publish bundle</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Extensions.html" title="">
	    	    		                    		    <span class="node-name-normal">Extensions</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Extensions/Extracting-the-files.html" title="">
	    	    		                    		    <span class="node-name-normal">Extracting the files</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Extensions/Activating-the-extension.html" title="">
	    	    		                    		    <span class="node-name-normal">Activating the extension</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Troubleshooting.html" title="">
	    	    		                    		    <span class="node-name-normal">Troubleshooting</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Concepts-and-basics.html" title="">
	    	    		                    		    <span class="node-name-normal">Concepts and basics</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Templates.html" title="">
	    	    		                    		    <span class="node-name-normal">Templates</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Features.html" title="">
	    	    		                    		    <span class="node-name-normal">Features</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../Reference.html" title="">
	    	    		                    		    <span class="node-name-normal">Reference</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                        
            
</map>

</div>            
</div>
</div>
</div>
</div>
<div class="area-docmain-normal">
<div class="template-design">
<div class="template-module content-view-full">
<div class="template-object">

<div class="attribute-heading">
<h1>from 3.5.2 to 3.7.0</h1>
</div>

 <p>This section describes how to upgrade your existing eZ Publish 3.5.2 installation to version 3.7.0. If you are upgrading from a version prior to eZ Publish 3.5.2, you need to first <a href="../../../../Upgrading/Upgrading-to-3.5/from-3.5.x-to-3.5.y.html" target="_self">upgrade to 3.5.2</a> before you can upgrade to 3.7.0.</p> <p>Make sure that you have a working <a href="../../../../Upgrading.html#backup" target="_self">backup</a> of the site before you do the actual upgrade. The upgrade procedure consists of the following steps:</p> 
<ol>
 <li><div> Upgrading the distribution files to 3.7.0 </div></li> <li><div> Upgrading the database to 3.7.0 </div></li> <li><div> Running the 3.6.0 upgrade scripts </div></li> <li><div> Updating the system configuration </div></li> <li><div> Clearing the caches </div></li> 
</ol>
  <a name="eztoc16262_1" id="eztoc16262_1"></a><h2>Step 1: Upgrading the distribution files</h2> <p>The easiest way to upgrade the distribution files is to unpack eZ Publish 3.7.0 to a directory and then copy the directories that contain site-specific files from the existing installation. Make sure that you copy the following directories:</p> 
<ul>
 <li><div> design/example </div></li> <li><div> design/example_admin </div></li> <li><div> var </div></li> <li><div> settings/siteaccess </div></li> <li><div> settings/override </div></li> 
</ul>
 <p>Replace "example" and "example_admin" with actual names used by your siteaccesses.</p>  <a name="eztoc16262_1_1" id="eztoc16262_1_1"></a><h3>Custom extensions</h3> <p>If you are using custom extensions then the subdirectories inside the "extension" directory will also have to be copied. However, make sure that you do not overwrite any extensions that come with eZ Publish (for example the "PayPal" extension).</p>    <a name="eztoc16262_2" id="eztoc16262_2"></a><h2>Step 2: Upgrading the database</h2> <p>The following text describes how a 3.5.2 database can be upgraded to 3.7.0.</p>  <a name="eztoc16262_2_2" id="eztoc16262_2_2"></a><h3>MySQL</h3> 
<ol>
 <li><div> Navigate into the eZ Publish 3.7.0 directory. </div></li> <li><div> Run the first database upgrade script: <pre class="wordwrap"><span class="line">mysql -u &lt;username&gt; -p&lt;password&gt; &lt;database&gt; &lt; update/database/mysql/3.6/dbupdate-3.5.2-to-3.6.0.sql</span>
</pre>  </div></li> <li><div> Run the second database upgrade script: <pre class="wordwrap"><span class="line">mysql -u &lt;username&gt; -p&lt;password&gt; &lt;database&gt; &lt; update/database/mysql/3.7/dbupdate-3.6.0-to-3.7.0.sql</span>
</pre>  </div></li> 
</ol>
<p>
Note that the CREATE TABLE statements in the database upgrade scripts do not specify which storage engine to use (no ENGINE or TYPE option), and thus the default storage engine will be used. Normally, it is MyISAM (starting from MySQL v.3.23). If you are using InnoDB, make sure the default storage engine is set to InnoDB before you run the database upgrade script (refer to <a href="http://dev.mysql.com/doc/refman/5.0/en/storage-engines.html" target="_blank">MySQL documentation</a> for information about how to set the default engine). If you were not able to change the MySQL configuration on your server, and the upgrade left you with a mix of table types, you can use the "bin/php/ezconvertmysqltabletype.php" script for database conversion. It is also possible to convert the newly created tables to InnoDB using ALTER TABLE statements as shown in the following example:<br></p><pre class="wordwrap"><span class="line">ALTER TABLE table_name1 TYPE = innodb;</span>
<span class="line">ALTER TABLE table_name2 TYPE = innodb;</span>
<span class="line">...</span>
</pre><p>
 <br>Replace "table_name1", "table_name2" with the actual names of the tables that need to be converted.</p>   <a name="eztoc16262_2_3" id="eztoc16262_2_3"></a><h3>PostgreSQL</h3> 
<ol>
 <li><div> Navigate into the eZ Publish 3.7.0 directory. </div></li> <li><div> Run the first database upgrade script: <pre class="wordwrap"><span class="line">psql -d &lt;database&gt; -U &lt;dbowner&gt; &lt; update/database/postgresql/3.6/dbupdate-3.5.2-to-3.6.0.sql</span>
</pre>  </div></li> <li><div> Run the second database upgrade script: <pre class="wordwrap"><span class="line">psql -d &lt;database&gt; -U &lt;dbowner&gt; &lt; update/database/postgresql/3.7/dbupdate-3.6.0-to-3.7.0.sql</span>
</pre>  </div></li> 
</ol>
    <a name="eztoc16262_3" id="eztoc16262_3"></a><h2>Step 3: Running the 3.6.0 upgrade scripts</h2> <p>The 3.6.0 version of eZ Publish introduced a couple of new features that are used in 3.7 version also. In order to make sure that your site is compatible with these features, you'll have to run a couple of upgrade scripts.</p>  <a name="eztoc16262_3_4" id="eztoc16262_3_4"></a><h3>Internal linking</h3> <p>In order to be compatible with the <a href="http://ez.no/download/ez_publish/changelogs/ez_publish_3_6/new_features/changes_in_xml_tags" target="_self">new internal linking feature</a>, you will have to run the "convertxmllinks.php" script. This script should be run for all siteaccesses that use different databases. If you only have a public and an administration siteaccess (which is the most typical/usual case), then you will only need to run the script for one of the siteaccesses.</p> 
<ol>
 <li><div> Navigate into the eZ Publish 3.7.0 directory. </div></li> <li><div> 
Run the script (replace &lt;siteaccess&gt; with the name of your siteaccess(es)):<br> <pre class="wordwrap"><span class="line">php update/common/scripts/convertxmllinks.php -s &lt;siteaccess&gt;</span>
</pre>  </div></li> 
</ol>
   <a name="eztoc16262_3_5" id="eztoc16262_3_5"></a><h3>Advanced related objects</h3> <p>In order to be compatible with the <a href="http://ez.no/download/ez_publish/changelogs/ez_publish_3_6/new_features/advanced_related_objects" target="_self">new advanced related objects feature</a>, you will have to run the "updaterelatedobjectslinks.php" script. This script should be run for all siteaccesses that use different databases. If you only have a public and an administration siteaccess (which is the most typical/usual case), then you will only need to run the script for one of the siteaccesses.</p> 
<ol>
 <li><div> Navigate into the eZ Publish 3.7.0 directory. </div></li> <li><div> 
Run the script (replace &lt;siteaccess&gt; with the name of your siteaccess(es)):<br> <pre class="wordwrap"><span class="line">php update/common/scripts/updaterelatedobjectslinks.php -s &lt;siteaccess&gt;</span>
</pre>  </div></li> 
</ol>
    <a name="eztoc16262_4" id="eztoc16262_4"></a><h2>Step 4: Updating the system configuration</h2>  <a name="eztoc16262_4_6" id="eztoc16262_4_6"></a><h3>Administration interface toolbar changes</h3> <p>The right section of the administration interface has been slightly changed in 3.6.0. It now uses the toolbar system and features a couple of new toolbars for developers (clear cache, debug control, etc.). In order to make it work, you will have to add the following settings in "toolbar.ini.append.php" for the siteaccesses that use the admin design:</p> <pre class="wordwrap copytoclipboard"><span class="line">[Toolbar]</span>
<span class="line">AvailableToolBarArray[]=admin_right</span>
<span class="line">AvailableToolBarArray[]=admin_developer</span>
<span class="line"> </span>
<span class="line">[Tool]</span>
<span class="line">AvailableToolArray[]=admin_current_user</span>
<span class="line">AvailableToolArray[]=admin_bookmarks</span>
<span class="line">AvailableToolArray[]=admin_clear_cache</span>
<span class="line">AvailableToolArray[]=admin_quick_settings</span>
<span class="line"> </span>
<span class="line">[Toolbar_admin_right]</span>
<span class="line">Tool[]</span>
<span class="line">Tool[]=admin_current_user</span>
<span class="line">Tool[]=admin_bookmarks</span>
<span class="line"> </span>
<span class="line">[Toolbar_admin_developer]</span>
<span class="line">Tool[]</span>
<span class="line">Tool[]=admin_clear_cache</span>
<span class="line">Tool[]=admin_quick_settings</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '[Toolbar]\r\nAvailableToolBarArray[]=admin_right\r\nAvailableToolBarArray[]=admin_developer\r\n\r\n[Tool]\r\nAvailableToolArray[]=admin_current_user\r\nAvailableToolArray[]=admin_bookmarks\r\nAvailableToolArray[]=admin_clear_cache\r\nAvailableToolArray[]=admin_quick_settings\r\n\r\n[Toolbar_admin_right]\r\nTool[]\r\nTool[]=admin_current_user\r\nTool[]=admin_bookmarks\r\n\r\n[Toolbar_admin_developer]\r\nTool[]\r\nTool[]=admin_clear_cache\r\nTool[]=admin_quick_settings' ); return false;" /></p>
<![endif]-->   <a name="eztoc16262_4_7" id="eztoc16262_4_7"></a><h3>Visibility of hidden nodes</h3> <p>In eZ Publish 3.6.0, the default value of the "<a href="../../../3.8/Reference/Configuration-files/site.ini/SiteAccessSettings/ShowHiddenNodes.html" target="_self">ShowHiddenNodes</a>" configuration directive has become "false". This means that hidden nodes will not be available on any siteaccess. It is recommended to add the following line to the "[SiteAccessSettings]" section of the "settings/siteaccess/example_admin/site.ini.append.php" configuration file (replace "example_admin" by the actual name of your admin siteaccess): </p><pre class="wordwrap"><span class="line">ShowHiddenNodes=true</span>
</pre><p>This will instruct the system to show hidden nodes in the administration interface.</p>   <a name="eztoc16262_4_8" id="eztoc16262_4_8"></a><h3>Enabling database transaction support (optional)</h3> <p>eZ Publish 3.6.0 introduced support for database transactions. This feature makes eZ Publish less vulnerable for database errors and inconsistencies due to aborted requests. It is highly recommended to make use of this feature. Transaction support is available for MySQL from version 4.1 and above and for all PostgreSQL and Oracle versions. MySQL users must first convert the database (see below).</p>  <a name="eztoc16262_4_8_1" id="eztoc16262_4_8_1"></a><h4>MySQL table conversion</h4> <p>MySQL users have to perform an extra step when enabling transaction support. Make sure that you have MySQL 4.0 or later before attempting to perform this step. Previous versions of eZ Publish use "MyISAM" type tables. Such tables do not support transactions. The database must be converted so that all tables use the "InnoDB" type instead of "MyISAM". This can be done using the "ezconvertmysqltabletype.php" script:</p> 
<ol>
 <li><div> Navigate into the eZ Publish 3.7.0 directory. </div></li> <li><div> 
Run the database conversion script; example:<br> <pre class="wordwrap"><span class="line">bin/php/ezconvertmysqltabletype.php --host=localhost --user=arnold --password=secret --database=ezpublish --newtype=innodb</span>
</pre>(You will have to provide your own values for the "host", "user", "password" and "database" parameters.) </div></li> 
</ol>
<p>It is also recommended to set the default storage engine to InnoDB (refer to <a href="http://dev.mysql.com/doc/refman/5.0/en/storage-engines.html" target="_blank">MySQL documentation</a> for information about how this can be done).</p>   <a name="eztoc16262_4_8_2" id="eztoc16262_4_8_2"></a><h4>Enabling transaction support in eZ Publish</h4> <p>Each siteaccess which is configured to communicate with a database that uses "InnoDB" tables can be configured to use transactions. This can be done by adding "Transactions=enabled" within the "[DatabaseSettings]" block in "site.ini.append.php" for the target siteaccess(es). You can also add this line to the "settings/override/site.ini.append.php" file instead of doing it for each of the target siteaccesses (this way is recommended if all your siteaccesses use the same database).</p>     <a name="eztoc16262_5" id="eztoc16262_5"></a><h2>Step 5: Clearing the caches</h2> <p>Whenever an eZ Publish solution is upgraded, all caches must be cleared in a proper way. This should be done from within a system shell:</p> 
<ol>
 <li><div> Navigate into the eZ Publish 3.7.0 directory. </div></li> <li><div> 
Run the clear cache script:<br> <pre class="wordwrap"><span class="line">bin/shell/clearcache.sh --clear-all</span>
</pre>  </div></li> 
</ol>
 <p>Make sure that all caches are cleared. Sometimes the script is unable to clear caches because of restrictive file/directory permission settings. Make sure that all caches have been cleared by inspecting the contents of the various cache subdirectories within the "var" directory.</p> 

<div class="break"></div><div class="pageinfo float-break">
<div class="created">


<p><label>Written by:</label>Balazs Halasy (22/04/2005 9:48 am)</p>
</div>
<div class="modified">
<p><label>Last updated by:</label>Julia Shymova (14/09/2007 10:18 am)</p>
</div><div class="authors">
<p><label>Maintainers:</label>Svitlana Shatokhina, Julia Shymova</p>
</div></div>
<hr class="hide">

</div>
</div>
</div>

<div id="comments" class="class-comment">
<div class="content-view-children">

<h1>Comments</h1>
<div id="comments-content">
<ul>    <li class="comment-bglight"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment2769" class="attribute-heading">
<h2>Change the access rules</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Saturday 22 October 2005 5:11:22 pm</p>
    <p class="author">xavier dutoit</p>
</div>

<div class="attribute-short">
When migrating a web site from 3.5.5 (svn) to the 3.7, I had to modify the anonymous user rules, as it *seems* that on user login rule, there is a new type of restriction based on the site access.<br>
<br>
Anyway, I had user login * and it didn't work, I added user login siteaccess (mysite,mysite) and it worked.
</div>




     


</div>


</div>
</div>    </div></li></ul>
</div>
<div class="toolbar">


</div>

</div>
</div>

</div>
<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide">

</div></div></div>



</div>
<!-- Complete page area: END -->











</body>
</html><!-- th[eZ] 20050804 -->
