<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


<style type="text/css">
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/core.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/classes.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/doc.css);
    @import url(../../../../../../../extension/ezdoc/design/doc/stylesheets/print.css) print;</style>

<link type="text/css" rel="stylesheet" href="../../../../../../../extension/ezdoc/design/doc/stylesheets/print.css" media="print">

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie5.css);    </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte.css); </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte-doc.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6.css);    </style>     <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezdoc/design/doc/stylesheets/gecko.css);</style>"); --></script>

<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/mainmenu-hover.js"></script>
<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../../../../../extension/ezdoc/design/doc/javascripts/ezno-searchbox.js"></script>
                                                                
    <title>search / Fetch functions / content / Modules / Reference / 3.7 / Technical manual / eZ Publish / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

            <meta http-equiv="Content-language" content="en-GB">

    
                <meta name="author" content="eZ systems">
                    <meta name="copyright" content="eZ systems">
                    <meta name="description" content="eZ Publish Documentation">
                    <meta name="keywords" content="eZ Publish, documentation, manual, reference, eZ systems">
        
    <meta name="generator" content="eZ Publish">
    <link rel="Home" href="https://doc.ez.no/" title="Doc front page">
<link rel="Search" href="https://doc.ez.no/content/advancedsearch" title="Search Doc">
<link rel="Shortcut icon" href="../../../../../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon">

</head>
<body onload="initDocSearch();menuInit();">

<!-- Complete page area: START -->
<div id="page">


<div><a href="https://www.ibexa.co"><img class="logotype" width="100" height="50" src="https://ezpublishdoc.mugo.ca/design/standard/images/ibexa_logo.svg" alt="ibexa"></a></div>
<div id="page-content-position"><div id="page-content-position-inner"><div id="page-content">

<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p><a href="../index.html">ez publish</a>
        
                        /
                            <a href="../../../../../../Technical-manual.html">technical manual</a>
        
                        /
                            <a href="../../../../../3.7.html">3.7</a>
        
                        /
                            <a href="../../../../Reference.html">reference</a>
        
                        /
                            <a href="../../../Modules.html">modules</a>
        
                        /
                            <a href="../../content.html">content</a>
        
                        /
                            <a href="../Fetch-functions.html">fetch functions</a>
        
                        /
                            search
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide">

<!-- Main area: START -->
                                    <div id="ezp5disclaimer">
                <p><strong style="color: red">Caution:</strong> This documentation is for <strong>eZ Publish</strong> <em>legacy</em>, from version 3.x to 5.x.<br></p>
            </div>
            
<div id="page-width5">
<div id="main" class="float-break">


<div class="template-design area-docmenu-normal">
<div class="template-module">
<div class="template-object">
<div id="contentmenu">
                        <div class="attribute-heading"><h2 class="bullet"><a href="../../../../../3.7.html">Table of contents</a></h2></div>
<div class="boxcontent">

<map id="contentstructure">

    
                                                                        
            <ul>
	    
                                                        
                                    
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../../Installation.html" title="">
	    	    		                    		    <span class="node-name-normal">Installation</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../../Concepts-and-basics.html" title="">
	    	    		                    		    <span class="node-name-normal">Concepts and basics</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../../Templates.html" title="">
	    	    		                    		    <span class="node-name-normal">Templates</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../../Features.html" title="">
	    	    		                    		    <span class="node-name-normal">Features</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter-selected  ">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../../Reference.html" title="">
	    	    		                    		    <span class="node-name-normal">Reference</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Datatypes.html" title="">
	    	    		                    		    <span class="node-name-normal">Datatypes</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Content-classes.html" title="">
	    	    		                    		    <span class="node-name-normal">Content classes</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Modules.html" title="">
	    	    		                    		    <span class="node-name-normal">Modules</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Views.html" title="">
	    	    		                    		    <span class="node-name-normal">Views</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Objects.html" title="">
	    	    		                    		    <span class="node-name-normal">Objects</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Workflow-events.html" title="">
	    	    		                    		    <span class="node-name-normal">Workflow events</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-operators.html" title="">
	    	    		                    		    <span class="node-name-normal">Template operators</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-functions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template functions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-control-structures.html" title="">
	    	    		                    		    <span class="node-name-normal">Template control structures</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-override-conditions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template override conditions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-fetch-functions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template fetch functions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Template-PDF-functions.html" title="">
	    	    		                    		    <span class="node-name-normal">Template PDF functions</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Configuration-files.html" title="">
	    	    		                    		    <span class="node-name-normal">Configuration files</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li>
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../Libraries.html" title="">
	    	    		                    		    <span class="node-name-normal">Libraries</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="last">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../../../XML-tags.html" title="">
	    	    		                    		    <span class="node-name-normal">XML tags</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                            </ul>
                        
            
</map>

</div>            
</div>
</div>
</div>
</div>
<div class="area-docmain-normal">
<div class="template-design">
<div class="template-module content-view-full">
<div class="template-object">

<div class="attribute-heading">
<h1>search</h1>
</div>
<h3>Summary</h3>
Fetches nodes containing data that match a certain criteria.<h3>Usage</h3>
<pre class="wordwrap">
<span class="line">fetch( content, search,</span>
<span class="line">       hash( text, text,</span>
<span class="line">           [ offset,             offset, ]</span>
<span class="line">           [ limit,              limit,  ]</span>
<span class="line">           [ section_id,         id,     ]</span>
<span class="line">           [ subtree_array,      array,  ]</span>
<span class="line">           [ publish_timestamp,  time,   ]</span>
<span class="line">           [ publish_date,       date,   ]</span>
<span class="line">           [ class_id,           id,     ]</span>
<span class="line">           [ class_attribute_id, id,     ]</span>
<span class="line">           [ sort_by,            sort_by ] ) )</span>

</pre><h3>Parameters</h3><table class="list" cellspacing="0">
<tr><th>Name</th><th>Type</th><th>Description</th><th>Required</th></tr><tr class="bglight">
        <td>text</td>
        <td>string</td>
        <td>The text that should be matched.</td>
        <td>Yes.</td>
    </tr><tr class="bgdark">
        <td>subtree_array</td>
        <td>mixed</td>
        <td>Array node ID number under which the system should search.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>offset</td>
        <td>integer</td>
        <td>The offset to start at.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>limit</td>
        <td>integer</td>
        <td>The number of nodes that should be returned.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>publish_timestamp</td>
        <td>integer</td>
        <td>Only search objects with the specified publishing date/time (as a UNIX timestamp).</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>publish_date</td>
        <td>integer</td>
        <td>Only search objects published during the last day / week / month / three months / one year.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>section_id</td>
        <td>integer</td>
        <td>Only match objects that are in this section.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>class_id</td>
        <td>integer</td>
        <td>Only match objects that are instances of this class. This parameter can also be an array of class ID numbers.</td>
        <td>No.</td>
    </tr><tr class="bglight">
        <td>class_attribute_id</td>
        <td>integer</td>
        <td>Only search within this attribute. This parameter can also be an array of attribute ID numbers.</td>
        <td>No.</td>
    </tr><tr class="bgdark">
        <td>sort_by</td>
        <td>mixed</td>
        <td>Sort the result. See description below.</td>
        <td>No.</td>
    </tr></table><h3>Returns</h3>
 <p>An array of hashes (see below) or FALSE.</p><h3>Description</h3>
 <p>This function will perform a search and it will return the hits that the current user has read access to. The function returns an array of hashes. The hashes consist of the following elements:</p> <table class="renderedtable" cellpadding="2" cellspacing="0">
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>SearchResult</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>array</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>An array of the nodes (as <a href="../../../Objects/ezcontentobjecttreenode.html" target="_self">ezcontentobjecttreenode</a> objects) that matched the search conditions.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>SearchCount</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>integer</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>The total number of nodes that matched the search conditions.</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>StopWordArray</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>array</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>An array of strings containing words that were excluded from the search.</p> 
  </td>
 
</tr>
 
</table>
    <a name="eztoc17452_0_0_1" id="eztoc17452_0_0_1"></a><h4>Sorting</h4> <p>The "sort_by" parameter makes it possible to sort the result in different ways. This parameter behaves exactly in the same way as it does for the "list" function. Please refer to the documentation page of the "<a href="list.html" target="_self">list</a>" function for a complete explanation of this parameter.</p> <a name="eztoc17452_0_0_2" id="eztoc17452_0_0_2"></a><h4>Searching by the date of publishing</h4> <p>The "publish_date" parameter makes it possible to search objects published during the specified period. The following table reveals the possible values of this parameter.</p> <table class="renderedtable" cellpadding="2" cellspacing="0">
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>1</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>one day</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>2</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>one week</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>3</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>one month</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>4</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>three months</p> 
  </td>
 
</tr>
 
<tr>
 <td valign="top" style="vertical-align: top">   <p>5</p> 
  </td>
 <td valign="top" style="vertical-align: top">   <p>one year</p> 
  </td>
 
</tr>
 
</table>
 <p>The "publish_timestamp" parameter makes it possible to search objects with the specified publishing date/time. This value must be a UNIX timestamp. You can also use an array of two elements in order to search withing the given range.</p> <p>Please note that you can not use both "publish_timestamp" and "publish_date" at the same time. If you use "publish_timestamp" then "publish_date" will be ignored.</p>   <h3>Examples</h3>
    <a name="eztoc17453_0_0_1" id="eztoc17453_0_0_1"></a><h4>Example 1</h4> <pre class="wordwrap copytoclipboard"><span class="line">{def $search=fetch( 'content', 'search',</span>
<span class="line">                    hash( 'text',     'example',</span>
<span class="line">                          'class_id', array( '2', '5' ) ) )}</span>
<span class="line"> </span>
<span class="line">The search returned {$search.SearchCount} matches. &lt;br /&gt;</span>
<span class="line"> </span>
<span class="line">{foreach $search.SearchResult as $matched_node}</span>
<span class="line">    {$matched_node.name|wash} &lt;br /&gt;</span>
<span class="line">{/foreach}</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '{def $search=fetch( \'content\', \'search\',\r\n                    hash( \'text\',     \'example\',\r\n                          \'class_id\', array( \'2\', \'5\' ) ) )} \r\n\r\nThe search returned {$search.SearchCount} matches. &lt;br /&gt;\r\n\r\n{foreach $search.SearchResult as $matched_node}\r\n    {$matched_node.name|wash} &lt;br /&gt;\r\n{/foreach}' ); return false;" /></p>
<![endif]--> <p>Outputs the names of all nodes which encapsulte objects of classes 2 and 5 containing the word "example".</p> <a name="eztoc17453_0_0_2" id="eztoc17453_0_0_2"></a><h4>Example 2</h4> <pre class="wordwrap copytoclipboard"><span class="line">{def $search=fetch( 'content', 'search',</span>
<span class="line">                    hash( 'text',     'example',</span>
<span class="line">                          'publish_timestamp', array( '1033920746', '1033920789' ) ) )}</span>
<span class="line"> </span>
<span class="line">The search returned {$search.SearchCount} matches. &lt;br /&gt;</span>
<span class="line"> </span>
<span class="line">{foreach $search.SearchResult as $matched_node}</span>
<span class="line">    {$matched_node.name|wash} &lt;br /&gt;</span>
<span class="line">{/foreach}</span>
</pre><!--[if IE]>
<p class="copytoclipboard"><img src="/extension/ezdoc/design/doc/images/copytoclipboard.gif" height="16" width="16" alt="Copy to clipboard" title="Copy to clipboard" onclick="window.clipboardData.setData( 'text', '{def $search=fetch( \'content\', \'search\',\r\n                    hash( \'text\',     \'example\',\r\n                          \'publish_timestamp\', array( \'1033920746\', \'1033920789\' ) ) )} \r\n\r\nThe search returned {$search.SearchCount} matches. &lt;br /&gt;\r\n\r\n{foreach $search.SearchResult as $matched_node}\r\n    {$matched_node.name|wash} &lt;br /&gt;\r\n{/foreach}' ); return false;" /></p>
<![endif]--> <p>Outputs the names of all nodes which encapsulte objects published between the specified date/time values.</p>   


<div class="break"></div><div class="pageinfo float-break">
<div class="created">


<p><label>Written by:</label>Balazs Halasy (06/02/2004 12:12 pm)</p>
</div>
<div class="modified">
<p><label>Last updated by:</label>Svitlana Shatokhina (14/06/2006 1:45 pm)</p>
</div><div class="authors">
<p><label>Maintainers:</label>Balazs Halasy, Svitlana Shatokhina</p>
</div></div>
<hr class="hide">

</div>
</div>
</div>

<div id="comments" class="class-comment">
<div class="content-view-children">

<h1>Comments</h1>
<div id="comments-content">
<ul>    <li class="comment-bglight"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment4381" class="attribute-heading">
<h2>addendum to the doc</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Wednesday 14 June 2006 1:47:34 pm</p>
    <p class="author">Massimiliano Bariola</p>
</div>

<div class="attribute-short">
A good addendum to the doc would be that class_id and class_attribute_id should be thought as mutually dependent/exclusive for obvious reasons.
</div>




     


</div>


</div>
</div>    </div></li></ul>
</div>
<div class="toolbar">


</div>

</div>
</div>

</div>
<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide">

</div></div></div>



</div>
<!-- Complete page area: END -->











</body>
</html><!-- th[eZ] 20050804 -->
