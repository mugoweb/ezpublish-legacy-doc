<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


<style type="text/css">
    @import url(../../../extension/ezdoc/design/doc/stylesheets/core.css);
    @import url(../../../extension/ezdoc/design/doc/stylesheets/classes.css);
    @import url(../../../extension/ezdoc/design/doc/stylesheets/doc.css);
    @import url(../../../extension/ezdoc/design/doc/stylesheets/print.css) print;</style>

<link type="text/css" rel="stylesheet" href="../../../extension/ezdoc/design/doc/stylesheets/print.css" media="print">

<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie5.css);    </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte.css); </style>     <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6lte-doc.css); </style> <![endif]-->
<!--[if IE 6]>     <style type="text/css"> @import url(/extension/ezdoc/design/doc/stylesheets/ie6.css);    </style>     <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezdoc/design/doc/stylesheets/gecko.css);</style>"); --></script>

<script type="text/javascript" src="../../../extension/ezdoc/design/doc/javascripts/mainmenu-hover.js"></script>
<script type="text/javascript" src="../../../extension/ezdoc/design/doc/javascripts/dropdownmenu.js"></script>
<script type="text/javascript" src="../../../extension/ezdoc/design/doc/javascripts/ezno-searchbox.js"></script>
                                        
    <title>Upgrading from 4.1.x to 4.2.y / Upgrading to 4.2 / Upgrading / eZ Publish / Documentation - Doc</title>

    
    
    
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

            <meta http-equiv="Content-language" content="en-GB">

    
                <meta name="author" content="eZ systems">
                    <meta name="copyright" content="eZ systems">
                    <meta name="description" content="eZ Publish Documentation">
                    <meta name="keywords" content="eZ Publish, documentation, manual, reference, eZ systems">
        
    <meta name="generator" content="eZ Publish">
    <link rel="Home" href="https://doc.ez.no/" title="Doc front page">
<link rel="Search" href="https://doc.ez.no/content/advancedsearch" title="Search Doc">
<link rel="Shortcut icon" href="../../../extension/ezdoc/design/doc/images/favicon.ico" type="image/x-icon">

</head>
<body onload="initDocSearch();menuInit();">

<!-- Complete page area: START -->
<div id="page">


<div><a href="https://www.ibexa.co"><img class="logotype" width="100" height="50" src="https://ezpublishdoc.mugo.ca/design/standard/images/ibexa_logo.svg" alt="ibexa"></a></div>
<div id="page-content-position"><div id="page-content-position-inner"><div id="page-content">

<!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p><a href="../index.html">ez publish</a>
        
                        /
                            <a href="../../Upgrading.html">upgrading</a>
        
                        /
                            <a href="../Upgrading-to-4.2.html">upgrading to 4.2</a>
        
                        /
                            upgrading from 4.1.x to 4.2.y
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide">

<!-- Main area: START -->
                                    <div id="ezp5disclaimer">
                <p><strong style="color: red">Caution:</strong> This documentation is for <strong>eZ Publish</strong> <em>legacy</em>, from version 3.x to 5.x.<br></p>
            </div>
            
<div id="page-width5">
<div id="main" class="float-break">


<div class="template-design area-docmenu-normal">
<div class="template-module">
<div class="template-object">
<div id="contentmenu">
                        <div class="attribute-heading"><h2 class="bullet"><a href="../Upgrading-to-4.2.html">Table of contents</a></h2></div>
<div class="boxcontent">

<map id="contentstructure">

    

                                                                        
            <ul>
	    
                                                        
                                    
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Releases.html" title="">
	    	    		                    		    <span class="node-name-normal">Releases</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../How-to-proceed.html" title="">
	    	    		                    		    <span class="node-name-normal">How to proceed</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Backup-and-consistency-checks.html" title="">
	    	    		                    		    <span class="node-name-normal">Backup and consistency checks</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Direct-upgrading.html" title="">
	    	    		                    		    <span class="node-name-normal">Direct upgrading</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-5.1.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 5.1</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-5.0.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 5.0</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-4.7.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 4.7</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-4.6.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 4.6</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-4.5.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 4.5</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-4.4.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 4.4</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-4.3.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 4.3</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter-selected  ">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-4.2.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 4.2</span>
                    			    	    		</a>
			           </div>
        
            <ul>
	    
                                                    
	<li class="last currentnode">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="Upgrading-from-4.1.x-to-4.2.y.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading from 4.1.x to 4.2.y</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                                        </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-4.1.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 4.1</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-4.0.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 4.0</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-3.10.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 3.10</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-3.9.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 3.9</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-3.8.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 3.8</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-3.7.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 3.7</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-3.6.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 3.6</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-3.5.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 3.5</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-3.4.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 3.4</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-3.3.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 3.3</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-3.2.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 3.2</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-3.1.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 3.1</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-to-3.0.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading to 3.0</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Upgrading-from-3.a.b-to-3.x.y.html" title="">
	    	    		                    		    <span class="node-name-normal">Upgrading from 3.a.b to 3.x.y</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../The-system-upgrade-scripts.html" title="">
	    	    		                    		    <span class="node-name-normal">The system upgrade scripts</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                
                                                    
	<li class="topchapter">
	    <div>
	    
	    

	    
	    
	    
	    			    	    
	    
	    		<a class="nodetext" href="../Notes-about-database-changes.html" title="">
	    	    		                    		    <span class="node-name-normal">Notes about database changes</span>
                    			    	    		</a>
			           </div>
        
                                    </li>
            
                                            </ul>
                        
            
</map>

</div>            
</div>
</div>
</div>
</div>
<div class="area-docmain-normal">
<div class="template-design">
<div class="template-module content-view-full">
<div class="template-object">

<div class="attribute-heading">
<h1>Upgrading from 4.1.x to 4.2.y</h1>
</div>

<p>This section describes how to upgrade your existing eZ Publish 4.1.x installation to version 4.2. If you are upgrading from version earlier than 4.0.3, you first need to upgrade to 4.0.3 before you can upgrade to 4.2 (Refer to either "<a href="http://ez.no/doc/ez_publish/upgrading/upgrading_to_4_0/from_3_10_x_to_4_0_y" target="_self">Upgrading from 3.10.x to 4.0.y</a>" or "<a href="http://ez.no/doc/ez_publish/upgrading/upgrading_to_4_0/from_4_0_x_to_4_0_y" target="_self">Upgrading from 4.0.x to 4.0.y</a>" depending on which version you are currently running.)</p><p>The upgrade procedure described below is generic and does not cover any specific cases (for example, running eZ Publish in a clustered environment).</p><p>Make sure that you have a working <a href="http://ez.no/doc/ez_publish/upgrading#backup" target="_self">backup</a> of the site before you do the actual upgrade.</p><a name="eztoc104077_0_1" id="eztoc104077_0_1"></a><h3>Important upgrade notes:</h3><p>You need to run "updateimagesystem.php" before the "dbupdate" scripts, otherwise the tables being upgraded will be removed.</p><p>The procedure for upgrading directly from version 4.1.x to 4.2 consists of the following steps:</p>
<ol>
<li><div> Upgrading the distribution files to 4.2 </div></li><li><div> Upgrading custom extensions </div></li><li><div> Updating image system </div></li><li><div> Upgrading the database to 4.2 </div></li><li><div> Regenerate the autoload array for extensions </div></li><li><div> Running the system upgrade scripts for versions from 4.0.x to 4.2 </div></li><li><div> Clearing the caches </div></li>
</ol>
<a name="eztoc104077_1" id="eztoc104077_1"></a><h2>Check for requirements</h2><a name="eztoc104077_1_2" id="eztoc104077_1_2"></a><h3>The eZ Components 2009.1 requirements</h3><p>With eZ Publish 4.2, <b>eZ Components 2009.1</b> is the minimum version required. If you installed a previous version with PEAR, please upgrade to version 2009.1. For more information also see <a href="http://ezcomponents.org/docs/install" target="_self">http://ezcomponents.org/docs/install</a></p><a name="eztoc104077_1_3" id="eztoc104077_1_3"></a><h3>The PHP requirements</h3><p>Although a PHP version 5.2.x is listed as required (with the exception of PHP 5.2.9 which has a serious regression in the array_unique() call), full PHP version 5.3 compatibility is also provided.</p><p>For more information regarding system requirements check out <a href="../../Technical-manual/5.x/Installation/Requirements.html" target="_self">http://ez.no/ezpublish/requirements</a></p><a name="eztoc104077_2" id="eztoc104077_2"></a><h2>Step 1: Upgrading the distribution files</h2><p>The easiest way to upgrade the distribution files is to unpack eZ Publish 4.2 to a separate directory and then copy the directories that contain site-specific files from the existing installation. Make sure that you copy the following directories:</p>
<ul>
<li><div> design/ <i>example</i> </div></li><li><div> design/ <i>example_admin</i> </div></li><li><div> var </div></li><li><div> settings/siteaccess </div></li><li><div> settings/override </div></li>
</ul>
<p>Replace "example" and "example_admin" with the actual names of your siteaccesses.</p><a name="eztoc104077_3" id="eztoc104077_3"></a><h2>Step 2: Custom extensions</h2><p>If you are using custom extensions, the subdirectories inside the "extension" directory will also have to be copied. However, make sure that you do not overwrite any extensions that come with eZ Publish, which currently are eZ Online Editor (5.0.4) and eZ OpenOffice.org (2.4.0). Note that upgrading the distribution files will overwrite the autoload arrays for extensions. You will need to re-generate the autoload arrays for active extensions later.</p><p>See below for dedicated upgrade instructions for eZ Flow and eZ Webin.</p><p>Note that ezdhtml is now replaced by ezoe, so you should not copy it over.</p><p>For eZ OE 5.x you will need to have the following rewrite rule if using Virtual Hosts:</p><pre class="wordwrap"><span class="line">RewriteRule ^/var/[^/]+/cache/public/.* - [L]</span>
</pre><p>For more detailed instructions, see the dedicated doc page: <a href="http://ez.no/doc/extensions/online_editor/4.x/installation" target="_self">http://ez.no/doc/extensions/online_editor/5_x/installation</a></p><p>The updated versions of eZ Flow and eZ Website Interface will also install the following extensions:</p>
<ul>
<li><div> eZ Website Toolbar (separated from eZ Web site) </div></li><li><div> eZ JS Core (base library for client side Javascript and Ajax functions) </div></li><li><div> eZ Star Rating </div></li><li><div> eZ Google Maps Location </div></li>
</ul>
<a name="eztoc104077_4" id="eztoc104077_4"></a><h2>Step 3: updateimagesystem.php</h2><p>This script is necessary to run if you have data of the 'ezimage' datatype, dating from before eZ Publish 3.3, in version 3.3 a new image system took over based on ezimagealiashandler.</p><p>If you are upgrading to the 4.2 series of eZ Publish for the first time, and the installation at hand has been running since prior to eZ Publish 3.3 then you need to run the updateimagesystem.php script before running any of the dbupdate scripts for version 4.2.</p><p>If the installation at hand is a new installation or based on any eZ Publish version since 3.3 then you can skip running the updateimagesystem.php script.</p><a name="eztoc104077_5" id="eztoc104077_5"></a><h2>Step 4: Upgrading the database</h2><p>The update script for the database is located in</p><pre class="wordwrap"><span class="line">&lt;eZP root&gt;/update/database/&lt;mysql|postgresql&gt;/4.2/dbupdate-4.1.0-to-4.2.0.sql</span>
</pre><p>You can run this with the appropriate command line tool or application</p><a name="eztoc104077_6" id="eztoc104077_6"></a><h2>Step 5: Regenerate the autoload array for extensions</h2><p>The autoload system also has some changes, for example the autoload array for extensions is now placed in var/autoload of your eZ Publish installation (along the class changes in extensions itself).</p><p>To regenerate the autoload array, execute the following script from</p><pre class="wordwrap"><span class="line">php bin/php/ezpgenerateautoloads.php --extension</span>
</pre><a name="eztoc104077_7" id="eztoc104077_7"></a><h2> Step 6: Running the system upgrade scripts</h2><p>Run the following two upgrade scripts:</p><p>The update script in &lt;root of ez publish installation&gt;/update/common/scripts/4.1 is:</p>
<ul>
<li><div> correctxmlalign.php: after upgrading to 4.1 the default alignment for embedded images in ezxmltext datatype is removed, this script will allow you to have the correct xmlalignment. </div></li>
</ul>
<p>The update script in &lt;root of ez publish installation&gt;/update/common/scripts/4.2 is:</p>
<ul>
<li><div> fixorphanimages.php: this script will delete images from the storage directory that are no longer connected to any content object attribute </div></li>
</ul>
<a name="eztoc104077_8" id="eztoc104077_8"></a><h2>Step 7: Clearing the caches</h2><p>Whenever an eZ Publish solution is upgraded, all caches must be cleared in a proper way. This should be done from within a system shell:</p>
<ol>
<li><div> Navigate into the eZ Publish 4.2 directory. </div></li><li><div><p>Run the script using the following shell command:</p><pre class="wordwrap"><span class="line">php bin/php/ezcache.php --clear-all --purge</span>
</pre></div></li>
</ol>
<p>Purging ensures that the caches are physically removed. When the "--purge" parameter is not specified, the caches will be expired but not removed.</p><p>Sometimes the script is unable to clear all cache files because of restrictive file/directory permission settings. Make sure that all cache files have been cleared by inspecting the contents of the various cache sub-directories within the "var" directory (typically the "var/cache/" and "var/&lt;name_of_siteaccess&gt;/cache/" directories). If there are any cache files left, you need to remove them manually.</p><a name="eztoc104077_9" id="eztoc104077_9"></a><h2>Upgrading eZ Flow and/or Website Interface separately</h2><a name="eztoc104077_9_4" id="eztoc104077_9_4"></a><h3>Step 1: Backup</h3><p>Before you will start the Website Interface or eZ Flow upgrading process make sure that you have a backup of the existing website state including database, extensions, INI settings, etc. During the upgrade process existing eZ Flow and eZ Webin extensions will be removed and replaced with a new version. Website Interface and eZ Flow default content classes will be replaced as well. Upgrade script will also change some of the existing INI settings and add new ones which are required by latest version.</p><a name="eztoc104077_9_5" id="eztoc104077_9_5"></a><h3>Step 2: eZ Flow upgrade</h3><p>For information regarding upgrading to eZ Flow 2.0 please visit the following <a href="http://ez.no/doc/extensions/ez_flow/ez_flow_2_0_upgrade" target="_self">extension upgrading page.</a></p><p>To get more information about available upgrade options, execute ezflowupgrade.php script with –help parameter:</p><pre class="wordwrap"><span class="line">php bin/php/ezflowupgrade.php --help</span>
</pre><a name="eztoc104077_9_6" id="eztoc104077_9_6"></a><h3> Step 3: Re-write rules</h3><p>Users running their eZ Flow sites in VH mode should update their extension related re-write rules to the following:</p><pre class="wordwrap"><span class="line">Rewriterule ^/extension/[^/]+/design/[^/]+/(stylesheets|flash|images|lib|javascripts?)/.* - [L]</span>
</pre><a name="eztoc104077_9_7" id="eztoc104077_9_7"></a><h3> Step 4: Website Interface upgrade</h3><p>For more information regarding upgrading to eZ Webin 1.5 please visit the following <a href="http://ez.no/doc/extensions/website_interface/website_interface_1_5_upgrade" target="_self">extension upgrading page.</a></p><p>To get more information about available upgrade options, execute ezwebinupgrade.php script with –help parameter:</p><pre class="wordwrap"><span class="line">php bin/php/ezwebinupgrade.php --help</span>
</pre><a name="eztoc104077_9_8" id="eztoc104077_9_8"></a><h3> Step 5: Regenerate the autoload array for extensions</h3><p>The autoload system also has some changes, for example the autoload array for extensions is now placed in var/autoload of your eZ Publish installation (along the class changes in extensions itself).</p><p>To regenerate the autoload array, execute the following script from:</p><pre class="wordwrap"><span class="line">php bin/php/ezpgenerateautoloads.php --extension</span>
</pre><a name="eztoc104077_9_9" id="eztoc104077_9_9"></a><h3> Step 6: Cache</h3><p>Once the upgrade script is done, you need to clear the cache by executing following command from eZ Publish root folder:</p><pre class="wordwrap"><span class="line">php bin/php/ezcache.php --clear-all --purge</span>
</pre>

<div class="break"></div><div class="pageinfo float-break">
<div class="created">


<p><label>Written by:</label>Ester Heylen (24/09/2009 2:30 pm)</p>
</div>
<div class="modified">
<p><label>Last updated by:</label>Geir Arne Waaler (01/06/2011 11:14 am)</p>
</div><div class="authors">
<p><label>Maintainers:</label>Ester Heylen, Geir Arne Waaler</p>
</div></div>
<hr class="hide">

</div>
</div>
</div>

<div id="comments" class="class-comment">
<div class="content-view-children">

<h1>Comments</h1>
<div id="comments-content">
<ul>    <li class="comment-bglight"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment20822" class="attribute-heading">
<h2>eZ Flow and JS Core</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Wednesday 30 September 2009 10:30:39 am</p>
    <p class="author">Piotrek Kara&amp;#347;</p>
</div>

<div class="attribute-short">
For those who have used eZ Flow outside of standard packages or any custom way - with new eZ Flow you will also require the JS core extension to active extensions.
</div>




     


</div>


</div>
</div>    </div></li>    <li class="comment-bgdark"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment20967" class="attribute-heading">
<h2>migation to 4.2</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Friday 23 October 2009 7:42:31 am</p>
    <p class="author">Claude Deheneffe</p>
</div>

<div class="attribute-short">
I ran through successfully the upgrade steps including ezwebin. However, my site is not working properly anymore.  admin site shows "Click on icon to show the contextual menu" in the name of each sub-element of the site.  Checking the database in the administration menu ends up with a PHP fatal error call to a member schema() on a non-object in ... kernel/setup/systemupgrade.php on line 66.  Checking file consistency is OK.<br>
<br>
Returning back to 4.1 is OK. My site is currently under 4.0.<br>
<br>
Thank you in advance for your input on this problem.<br>
Rgds,<br>
Claude
</div>




     


</div>


</div>
</div>    </div></li>    <li class="comment-bglight"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment21113" class="attribute-heading">
<h2>Corruption of kernel on centos 5.1  </h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Tuesday 10 November 2009 4:09:16 pm</p>
    <p class="author">Claude Deheneffe</p>
</div>

<div class="attribute-short">
Machine installed with  PHP5.2.11.  Running through the upgrade procedure from 4.1 to 4.2 for clearing cache, ended up corrupting kernel. Liniux machine seems to be  corrupted and cannot boot anymore?   <br>
<br>
Any one having the same problem?<br>
<br>
<br>
<a href="mailto:root@INTRANET">root@INTRANET</a> intradev]# php update/common/scripts/4.2/fixorphanimages.php<br>
This script will delete images that look orphan<br>
Press ctrl-c in the next 10 seconds to prevent the script from starting...<br>
Looking for obsolete image files...<br>
1164 / 1164 [=======================================================&gt;] 100.00%<br>
[<a href="mailto:root@INTRANET">root@INTRANET</a> intradev]# php bin/php/ezcache.php --clear-all --purge<br>
Purging : Cache d'affichage de contenu, Cache Global INI, Cache INI, Cache codep              age, Cache des identifiants de classes, Cache des clÃ©s de classement, Cache des               alias d'URL, Cacher de transformation des caractÃ¨res, Alias d'image, Cache des               templates, Cache des template block, Cache des templates override, Cache des te              xtes convertis en imagePHP Fatal error:  Allowed memory size of 16777216 bytes e              xhausted (tried to allocate 262144 bytes) in /var/www/html/intradev/kernel/class              es/clusterfilehandlers/ezfsfilehandler.php on line 862<br>
<br>
Fatal error: eZ Publish did not finish its request<br>
The execution of eZ Publish was abruptly ended, the debug output is present belo              w.<br>
[<a href="mailto:root@INTRANET">root@INTRANET</a> intradev]# php bin/php/ezcache.php --clear-all --purge<br>
bash: /usr/bin/php: Aucun fichier ou rÃ©pertoire de ce type<br>

</div>




     


</div>

<ul>    <li class="comment-bglight"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment21166" class="attribute-heading">
<h2>Re: Corruption of kernel on centos 5.1</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Tuesday 17 November 2009 12:25:12 pm</p>
    <p class="author">Gunnstein Lye</p>
</div>

<div class="attribute-short">
Issue tracker, with patch (not yet approved):<br>
<a href="http://issues.ez.no/15823" title="http://issues.ez.no/15823">http://issues.ez.no/15823</a><br>
<br>
The bug can occur if the script is run as root and '/' is used as cache path for texttoimage cache. If not run as root, it can still delete files accessible by the user it is running as.
</div>




     


</div>


</div>
</div>    </div></li></ul>
</div>
</div>    </div></li>    <li class="comment-bgdark"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment21347" class="attribute-heading">
<h2>Permissions required for EZOE</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Thursday 04 February 2010 9:04:41 am</p>
    <p class="author">Bruce Morrison</p>
</div>

<div class="attribute-short">
If you are doing an upgrade the online editor requires access permissions to work.See <br>
<a href="http://ez.no/doc/extensions/online_editor/5_x/installation#eztoc97139_8" title="http://ez.no/doc/extensions/online_editor/5_x/installation#eztoc97139_8">http://ez.no/doc/extensions/online_editor/5_x/installation#eztoc97139_8</a><br>

</div>




     


</div>


</div>
</div>    </div></li>    <li class="comment-bglight"><div class="padding">
    <div class="content-view-line">
<div class="class-comment">

<div>

<div id="comment22757" class="attribute-heading">
<h2>Path of updateimagesystem.php</h2>
</div>

<div class="attribute-byline float-break">
    <p class="date">Friday 16 July 2010 7:59:28 pm</p>
    <p class="author">Leif Arne Storset</p>
</div>

<div class="attribute-short">
You should probably give the path of updateimagesystem.php - it's update/common/scripts/4.1/updateimagesystem.php .
</div>




     


</div>


</div>
</div>    </div></li></ul>
</div>
<div class="toolbar">


</div>

</div>
</div>

</div>
<!-- Main area content: END -->

</div>
</div>
<!-- Main area: END -->
<hr class="hide">

</div></div></div>



</div>
<!-- Complete page area: END -->











</body>
</html><!-- th[eZ] 20050804 -->
